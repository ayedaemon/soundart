import{r as Ye,P as rt,s as Ve,n as pe,d as p,c as U,Q as le,A as h,f as y,g as M,k as w,m as Me,x as Kt,R as ds,C as Ee,v as _e,S as K,b as ce,e as f,i as cs,T as he,j as B,h as J,l as N,t as Q,U as ht,V as Zt,W as mt,X as bt,B as Qe,Y as Ce}from"../chunks/CR7RWmmG.js";import{a as W,t as X,S as Le,i as Be,g as He,c as Ue,d as re,m as oe,e as ue,b as de,f as De}from"../chunks/YapMt7o9.js";import{d as at,w as Pe}from"../chunks/D5cg-Vx1.js";function We(t){return t?.length!==void 0?t:Array.from(t)}function Xt(t,e){X(t,1,1,()=>{e.delete(t.key)})}function Jt(t,e,s,l,i,a,o,n,r,u,d,c){let m=t.length,b=a.length,v=m;const S={};for(;v--;)S[t[v].key]=v;const E=[],R=new Map,A=new Map,_=[];for(v=b;v--;){const D=c(i,a,v),V=s(D);let G=o.get(V);G?_.push(()=>G.p(D,e)):(G=u(V,D),G.c()),R.set(V,E[v]=G),V in S&&A.set(V,Math.abs(v-S[V]))}const T=new Set,k=new Set;function H(D){W(D,1),D.m(n,d),o.set(D.key,D),d=D.first,b--}for(;m&&b;){const D=E[b-1],V=t[m-1],G=D.key,$=V.key;D===V?(d=D.first,m--,b--):R.has($)?!o.has(G)||T.has(G)?H(D):k.has($)?m--:A.get(G)>A.get($)?(k.add(G),H(D)):(T.add($),m--):(r(V,o),m--)}for(;m--;){const D=t[m];R.has(D.key)||r(D,o)}for(;b;)H(E[b-1]);return Ye(_),E}const gt=8,Ke={energy:0,treble:1,bass:2,mids:3,highs:4,lows:5,beat:6};function Ze(t,e,s){return t+(e-t)*s}function fs(t,e,s){return Math.min(Math.max(t,e),s)}class hs{context=null;analyser=null;source=null;freqData=null;stream=null;sharedBuffer=null;sharedFloatView=null;energy=0;treble=0;highs=0;mids=0;lows=0;bass=0;beatValue=0;beatCutoff=0;beatHold=0;smoothing=.3;beatFalloff=2.4;beatMin=.15;beatDecay=.98;beatHoldTime=.08;async init(){console.log("[AudioAnalyzer] Initializing v2 (Safe Mode)...");try{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});const e=window.AudioContext||window.webkitAudioContext;this.context=new e,this.source=this.context.createMediaStreamSource(this.stream),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,this.source.connect(this.analyser),this.freqData=new Uint8Array(this.analyser.frequencyBinCount);let s=!1;try{s=typeof window<"u"&&window.crossOriginIsolated&&typeof window.SharedArrayBuffer<"u"}catch{}if(console.log(`[AudioAnalyzer] SharedArrayBuffer support: ${s} (isolated: ${window.crossOriginIsolated})`),s)try{const l=(gt+this.analyser.frequencyBinCount)*4,i=window.SharedArrayBuffer;return this.sharedBuffer=new i(l),this.sharedFloatView=new Float32Array(this.sharedBuffer),console.log("[AudioAnalyzer] Using SharedArrayBuffer for zero-copy transfer"),this.sharedBuffer}catch(l){return console.error("[AudioAnalyzer] Failed to create SharedArrayBuffer despite checks:",l),null}else return console.warn("[AudioAnalyzer] SharedArrayBuffer not supported or not isolated, falling back to message passing"),null}catch(e){return console.error("Failed to initialize audio:",e),null}}dispose(){this.source&&(this.source.disconnect(),this.source=null),this.context&&(this.context.close(),this.context=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.analyser=null,this.freqData=null,this.sharedBuffer=null,this.sharedFloatView=null}update(e){if(!this.analyser||!this.freqData)return this.getEmptyMetrics();this.analyser.getByteFrequencyData(this.freqData);const s=this.freqData.length,i=(this.context?.sampleRate||44100)/this.analyser.fftSize,a=120,o=200,n=2e3,r=6e3,u=Math.max(2,Math.floor(a/i)),d=Math.max(u+1,Math.floor(o/i)),c=Math.max(d+1,Math.floor(n/i)),m=Math.max(c+1,Math.floor(r/i)),b=Math.min(s-1,d),v=Math.min(s-1,c),S=Math.min(s-1,m);let E=0,R=0,A=0,_=0,T=0,k=0;for(let O=0;O<s;O++){const j=this.freqData[O];E+=j,this.sharedFloatView&&(this.sharedFloatView[gt+O]=j/255),O<u&&(R+=j),O<b?A+=j:O<v?_+=j:O<S?T+=j:k+=j}const H=E/(s*255),D=R/(Math.max(1,u)*255),V=A/(Math.max(1,b)*255),G=_/(Math.max(1,v-b)*255),$=T/(Math.max(1,S-v)*255),F=k/(Math.max(1,s-S)*255);this.energy=Ze(this.energy,H,this.smoothing),this.treble=Ze(this.treble,F,this.smoothing),this.highs=Ze(this.highs,$,this.smoothing),this.mids=Ze(this.mids,G,this.smoothing),this.lows=Ze(this.lows,V,this.smoothing),this.bass=Ze(this.bass,D,this.smoothing);const ee=Math.max(0,e);return this.beatValue=Math.max(0,this.beatValue-ee*this.beatFalloff),V>this.beatCutoff&&V>this.beatMin&&(this.beatValue=fs(V*1.5,0,1),this.beatCutoff=V*1.1,this.beatHold=this.beatHoldTime),this.beatHold>0?this.beatHold-=ee:this.beatCutoff=Math.max(this.beatMin,this.beatCutoff-ee*this.beatDecay),this.sharedFloatView&&(this.sharedFloatView[Ke.energy]=this.energy,this.sharedFloatView[Ke.treble]=this.treble,this.sharedFloatView[Ke.bass]=this.bass,this.sharedFloatView[Ke.mids]=this.mids,this.sharedFloatView[Ke.highs]=this.highs,this.sharedFloatView[Ke.lows]=this.lows,this.sharedFloatView[Ke.beat]=this.beatValue),{energy:this.energy,treble:this.treble,highs:this.highs,mids:this.mids,lows:this.lows,bass:this.bass,beat:this.beatValue}}getEmptyMetrics(){return{energy:0,treble:0,highs:0,mids:0,lows:0,bass:0,beat:0}}isInitialized(){return this.analyser!==null}}const vs={energy:0,treble:0,bass:0,mids:0,highs:0,lows:0,beat:0};class ps{analyzer=null;sharedBuffer=null;enabled=!1;async enable(){if(this.analyzer||(this.analyzer=new hs),this.analyzer.isInitialized())return this.enabled=!0,!0;const e=await this.analyzer.init();return this.sharedBuffer=e??null,this.enabled=this.analyzer.isInitialized(),this.enabled}disable(){this.analyzer&&(this.analyzer.dispose(),this.analyzer=null),this.sharedBuffer=null,this.enabled=!1}update(e){return!this.analyzer||!this.analyzer.isInitialized()?vs:this.analyzer.update(e)}getSharedBuffer(){return this.sharedBuffer}isEnabled(){return this.enabled}usesSharedBuffer(){return this.sharedBuffer!==null}}function ms(t){return new Worker(""+new URL("../workers/render.worker-ZwNJFFA-.js",import.meta.url).href,{name:t?.name})}class bs{worker;constructor(e){this.worker=e}postMessage(e,s){s?this.worker.postMessage(e,s):this.worker.postMessage(e)}onMessage(e){this.worker.onmessage=s=>{e(s.data)}}terminate(){this.worker.terminate()}}class gs{bridge=null;resizeObserver=null;statsHandler=null;initialized=!1;usingSharedBuffer=!1;resolutionScale=1;canvas=null;init(e,s,l=1){if(this.initialized)return;this.canvas=e,this.resolutionScale=l;const i=e.transferControlToOffscreen(),a=new ms;this.bridge=new bs(a),this.usingSharedBuffer=!!s;const o=Math.min(window.devicePixelRatio||1,1.5)*l;this.bridge.postMessage({type:"INIT",canvas:i,audioBuffer:s,dpr:o,useFallback:!s},[i]),this.statsHandler&&this.bridge.onMessage(this.statsHandler),this.resizeObserver=new ResizeObserver(n=>{for(const r of n){const u=Math.min(window.devicePixelRatio||1,1.5)*this.resolutionScale;this.bridge?.postMessage({type:"RESIZE",width:r.contentRect.width,height:r.contentRect.height,dpr:u})}}),this.resizeObserver.observe(e),this.initialized=!0}updateResolutionScale(e){if(this.resolutionScale!==e&&(this.resolutionScale=e,this.canvas&&this.bridge)){const s=this.canvas.getBoundingClientRect(),l=Math.min(window.devicePixelRatio||1,1.5)*e;this.bridge.postMessage({type:"RESIZE",width:s.width,height:s.height,dpr:l})}}setAudioBuffer(e){!this.bridge||!e||this.usingSharedBuffer||(this.usingSharedBuffer=!0,this.bridge.postMessage({type:"SET_AUDIO_BUFFER",audioBuffer:e}))}updateMouse(e){this.bridge?.postMessage({type:"UPDATE_PARAMS",mouse:e})}updateConfig(e){this.bridge?.postMessage({type:"UPDATE_CONFIG",layers:e})}updateAudio(e){this.bridge?.postMessage({type:"UPDATE_AUDIO",metrics:e})}onStats(e){this.statsHandler=e,this.bridge&&this.bridge.onMessage(e)}usesSharedBuffer(){return this.usingSharedBuffer}dispose(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.bridge&&(this.bridge.terminate(),this.bridge=null),this.initialized=!1,this.usingSharedBuffer=!1}}const _s={energy:0,treble:0,bass:0,mids:0,highs:0,lows:0,beat:0},ys={sensitivity:1,highsBoost:1,midsBoost:1,lowsBoost:1,trebleBoost:1,bassBoost:1,beatBoost:1,minMotion:.02,beatGate:.35,autoEnabled:!1,autoStrength:.4,autoDecay:.6,autoTarget:"all"},Qt=Pe(_s),Se=Pe(ys),it=Pe(!1),xt=Pe(0);function Ie(t,e,s){return Math.min(Math.max(t,e),s)}const es=at([Qt,Se,xt],([t,e,s])=>{const l=Ie(e.sensitivity,0,2);let i=Ie(t.energy*l,0,2),a=Ie(t.treble*l*e.trebleBoost,0,2),o=Ie(t.beat*l*e.beatBoost*e.bassBoost,0,2);const n=(e.highsBoost+e.midsBoost+e.lowsBoost)/3;if(i*=n,i=Math.max(i,e.minMotion),a=Math.max(a,e.minMotion),o=Math.max(o,e.minMotion),e.autoEnabled&&s>0){const r=s*e.autoStrength;switch(e.autoTarget){case"energy":i+=r;break;case"treble":a+=r;break;case"beat":o+=r;break;default:i+=r,a+=r,o+=r}}return{energy:Ie(i,0,2),treble:Ie(a,0,2),beat:Ie(o,0,2),raw:{highs:Ie(t.highs*l,0,2),mids:Ie(t.mids*l,0,2),lows:Ie(t.lows*l,0,2),treble:Ie(t.treble*l,0,2),bass:Ie(t.bass*l,0,2),beat:Ie(t.beat*l,0,2)}}}),ge=(t,e,s,l,i,a,o=.01,n=!0,r,u)=>({id:t,label:e,type:"float",default:s,min:l,max:i,step:o,uniform:a,randomizable:n,randomMin:r,randomMax:u}),je=(t,e,s,l,i,a,o=1,n=!0,r,u)=>({id:t,label:e,type:"int",default:s,min:l,max:i,step:o,uniform:a,randomizable:n,randomMin:r,randomMax:u}),ws=(t,e,s,l,i,a=!0)=>({id:t,label:e,type:"select",default:s,options:l,uniform:i,randomizable:a}),Oe=(t,e)=>{const s=`uLayer${t.charAt(0).toUpperCase()+t.slice(1)}`;return[ge("intensity","Intensity",.5,0,1,`${s}`),ge("speed","Speed",1,0,3,`${s}Speed`),ge("zoom","Zoom",1,.5,2,`${s}Zoom`),ws("theme","Theme",0,[],`${s}Theme`)]},qe=[{id:"mandala",label:"Mandala",description:"Radial symmetries",properties:[...Oe("mandala"),je("segments","Segments",6,4,32,"uLayerMandalaSegments"),ge("rotation","Rotation",.2,-1,1,"uLayerMandalaRotation"),{id:"symmetry",label:"Symmetry",type:"boolean",default:!0,uniform:"uLayerMandalaSymmetry",randomizable:!0,ui:{shortLabel:"Sym",tooltip:"Toggle mirrored symmetry on/off"}}],shaderPath:"layers/mandala.glsl",randomizable:!0},{id:"kaleidoscope",label:"Kaleidoscope",description:"Sacred geometry mirroring",properties:[...Oe("kaleidoscope"),je("slices","Slices",6,6,24,"uLayerKaleidoscopeSlices"),ge("feedback","Feedback",.5,0,.95,"uLayerKaleidoscopeFeedback"),ge("distortion","Distortion",.5,0,2,"uLayerKaleidoscopeDistortion")],shaderPath:"layers/kaleidoscope.glsl",randomizable:!0},{id:"metatron",label:"Metatron's Cube",description:"Sacred geometry with nested rings",properties:[...Oe("metatron"),je("rings","Rings",2,1,10,"uLayerMetatronRings"),ge("thickness","Thickness",.008,.001,.02,"uLayerMetatronThickness",.001,!0,.003,.015),ge("spin","Spin",.5,-2,2,"uLayerMetatronSpin")],shaderPath:"layers/metatron.glsl",randomizable:!0},{id:"lissajous",label:"Lissajous",description:"Symmetric line trails",properties:[...Oe("lissajous"),{id:"frequencies",label:"Complexity",type:"float",default:3,min:1,max:10,step:.1,uniform:"uLayerLissajousFrequencies",randomizable:!0,randomMin:2,randomMax:8,ui:{shortLabel:"Cplx",tooltip:"Curve frequency ratio / knot complexity"}},{id:"slices",label:"Symmetry",type:"int",default:8,min:3,max:24,step:1,uniform:"uLayerLissajousSlices",randomizable:!0,randomMin:4,randomMax:16,ui:{shortLabel:"Sym",tooltip:"Kaleidoscope slices (higher = more symmetry)"}},{id:"damping",label:"Trail Decay",type:"float",default:.1,min:0,max:1,step:.01,uniform:"uLayerLissajousDamping",randomizable:!0,randomMin:0,randomMax:.8,ui:{shortLabel:"Decy",tooltip:"Higher = shorter trail"}},{id:"thickness",label:"Line Width",type:"float",default:.008,min:.001,max:.02,step:.001,uniform:"uLayerLissajousThickness",randomizable:!0,randomMin:.003,randomMax:.012,ui:{shortLabel:"Line",tooltip:"Line thickness"}}],shaderPath:"layers/lissajous.glsl",randomizable:!0},{id:"turbulence",label:"Turbulence",description:"Audio-reactive turbulence",properties:[...Oe("turbulence"),je("complexity","Complexity",3,1,6,"uLayerTurbulenceComplexity"),ge("flow","Flow",.5,-1,1,"uLayerTurbulenceFlow")],shaderPath:"layers/turbulence.glsl",randomizable:!0},{id:"displacement",label:"Displacement",description:"Cellular displacement waves",properties:[...Oe("displacement"),ge("strength","Strength",.5,0,2,"uLayerDisplacementStrength"),ge("cellSize","Cell Size",1,.1,5,"uLayerDisplacementCellSize"),ge("ripple","Ripple",1,0,3,"uLayerDisplacementRipple")],shaderPath:"layers/displacement.glsl",randomizable:!0},{id:"glow",label:"Center Glow",description:"Pulsing core with arcs",properties:[...Oe("glow"),ge("coreSize","Core Size",.5,.1,2,"uLayerGlowCoreSize"),je("ringCount","Ring Count",3,0,10,"uLayerGlowRingCount"),ge("arcIntensity","Arc Intensity",.5,0,2,"uLayerGlowArcIntensity")],shaderPath:"layers/glow.glsl",randomizable:!0},{id:"starfield",label:"Starfield",description:"Warp tunnel streaks",properties:[...Oe("starfield"),ge("density","Density",1,.1,3,"uLayerStarfieldDensity"),ge("warp","Warp",1,.1,5,"uLayerStarfieldWarp"),je("layers","Layers",4,1,8,"uLayerStarfieldLayers")],shaderPath:"layers/starfield.glsl",randomizable:!0},{id:"hopalong",label:"Hopalong Orbits",description:"Barry Martin attractor with kaleidoscope splits",properties:[...Oe("hopalong"),ge("divergence","Divergence",1,.1,5,"uLayerHopalongDivergence"),je("iterations","Iterations",50,10,200,"uLayerHopalongIterations"),je("slices","Slices",1,1,16,"uLayerHopalongSlices",1,!0,1,12),ge("rotation","Rotation",0,-1,1,"uLayerHopalongRotation",.01,!0,-.5,.5)],shaderPath:"layers/hopalong.glsl",randomizable:!0}],ks={dark:.2,medium:.5,bright:1},et={phone:{targetFps:24,resolutionScale:.5,maxActiveLayers:2,label:"Phone",icon:"üì±"},laptop:{targetFps:30,resolutionScale:.75,maxActiveLayers:4,label:"Laptop",icon:"üíª"},desktop:{targetFps:60,resolutionScale:1,maxActiveLayers:9,label:"Desktop",icon:"üñ•Ô∏è"}},Ss={panelsVisible:!0,fullscreen:!1,pipEnabled:!1,devicePreset:"desktop",targetFps:60,resolutionScale:1,maxActiveLayers:9,randomizerEnabled:!0,randomizerCooldown:2,randomizerTogglesLayers:!0,randomizerToggleChance:.3,randomizerMode:"flow",strobeMode:"flash"},me=Pe(Ss),ts=Pe(1),ss=Pe(1);function _t(t){ts.update(e=>Math.max(.1,Math.min(5,e+t)))}function yt(t){ss.update(e=>Math.max(.1,Math.min(5,e+t)))}function Es(t){const e=et[t];me.update(s=>({...s,devicePreset:t,targetFps:e.targetFps,resolutionScale:e.resolutionScale,maxActiveLayers:e.maxActiveLayers}))}function ls(){me.update(t=>{const e=["desktop","laptop","phone"],l=(e.indexOf(t.devicePreset)+1)%e.length,i=e[l],a=et[i];return{...t,devicePreset:i,targetFps:a.targetFps,resolutionScale:a.resolutionScale,maxActiveLayers:a.maxActiveLayers}})}function Ms(){me.update(t=>({...t,randomizerEnabled:!t.randomizerEnabled}))}function Ts(){me.update(t=>({...t,randomizerTogglesLayers:!t.randomizerTogglesLayers}))}function is(){me.update(t=>{const e=["flow","chaos","subtle"],s=(e.indexOf(t.randomizerMode)+1)%e.length;return{...t,randomizerMode:e[s]}})}function as(){me.update(t=>{const e=["flash","pulse","drift"],s=(e.indexOf(t.strobeMode)+1)%e.length;return{...t,strobeMode:e[s]}})}function Is(){const t=new Map;for(const e of qe){const s={};for(const l of e.properties)s[l.id]=l.default;t.set(e.id,{id:e.id,enabled:!1,properties:s,includeInRandomizer:e.randomizable!==!1,includeInStrobe:e.randomizable!==!1})}return t}const Re=Pe(Is());function ot(t,e,s){Re.update(l=>{const i=l.get(t);return i&&(i.properties[e]=s),l})}function ns(t){let e=0;for(const s of t.values())s.enabled&&e++;return e}function Cs(t,e){let s=!1;return Re.update(l=>{const i=l.get(t);if(i){if(!i.enabled&&e!==void 0&&ns(l)>=e)return l;if(i.enabled=!i.enabled,s=i.enabled,i.enabled){const o=qe.find(n=>n.id===t)?.properties.find(n=>n.id==="intensity");o&&(i.properties.intensity=o.default)}}return l}),s}function Ds(t){Re.update(e=>{const s=e.get(t);return s&&(s.includeInRandomizer=!s.includeInRandomizer),e})}function zs(t){Re.update(e=>{const s=e.get(t);return s&&(s.includeInStrobe=!s.includeInStrobe),e})}function As(t,e){Re.update(s=>{let l=0;for(const i of s.values()){if(t&&e!==void 0&&l>=e){i.enabled=!1;continue}if(i.enabled=t,t&&l++,i.enabled){const o=qe.find(n=>n.id===i.id)?.properties.find(n=>n.id==="intensity");o&&(i.properties.intensity=o.default)}}return s})}at(Re,t=>Array.from(t.values()).map(e=>{const s={},l=qe.find(i=>i.id===e.id);if(l)for(const i of l.properties){const a=e.properties[i.id];s[i.uniform]=typeof a=="boolean"?a?1:0:a}return{id:e.id,enabled:e.enabled,uniforms:s}}));const Vs=at([Re,es,ts,ss],([t,e,s,l])=>{const i={};for(const a of qe){const o=t.get(a.id);if(o)for(const n of a.properties){const r=o.properties[n.id]??n.default;let u=typeof r=="boolean"?r?1:0:r;n.id==="intensity"&&!o.enabled&&(u=0),n.id==="zoom"&&(u=u*s),n.id==="speed"&&(u=u*l),i[n.uniform]=u}}return i}),vt=[{id:0,label:"LSD (Rainbow)",preview:"linear-gradient(90deg, #ff0000, #ff8800, #ffff00, #00ff00, #00ffff, #0088ff, #8800ff, #ff00ff)",brightness:"bright",temperature:"neutral",saturation:"high",family:"spectrum"},{id:1,label:"Sunset",preview:"linear-gradient(90deg, #ff2e1f, #ff8c1f, #ffd940)",brightness:"bright",temperature:"warm",saturation:"high",family:"fire"},{id:2,label:"Aurora",preview:"linear-gradient(90deg, #0dd9b3, #1a59ff, #8ce6ff)",brightness:"medium",temperature:"cool",saturation:"high",family:"ocean"},{id:3,label:"Ultraviolet",preview:"linear-gradient(90deg, #8c26ff, #ff33bf, #3366ff)",brightness:"medium",temperature:"cool",saturation:"high",family:"cosmic"},{id:4,label:"Neon",preview:"linear-gradient(90deg, #1aff73, #ff1ad9)",brightness:"bright",temperature:"neutral",saturation:"high",family:"neon"},{id:5,label:"Split Complement",preview:"linear-gradient(90deg, #14d1ff, #ff7333, #cc33ff)",brightness:"bright",temperature:"neutral",saturation:"high",family:"spectrum"},{id:6,label:"Analogous Cool",preview:"linear-gradient(90deg, #14e6bf, #268cff, #6640ff)",brightness:"medium",temperature:"cool",saturation:"high",family:"ocean"},{id:7,label:"Tetradic",preview:"linear-gradient(90deg, #ff4d59, #33e699, #4073ff, #ffd933)",brightness:"bright",temperature:"neutral",saturation:"high",family:"spectrum"},{id:8,label:"Pastel Triad",preview:"linear-gradient(90deg, #e6a3a3, #a3e6b8, #a3b8e6)",brightness:"medium",temperature:"neutral",saturation:"low",family:"twilight"},{id:9,label:"Bioluminescent",preview:"linear-gradient(90deg, #001426, #00a3cc, #4dff99, #004066)",brightness:"dark",temperature:"cool",saturation:"medium",family:"ocean"},{id:10,label:"Iridescent",preview:"linear-gradient(90deg, #1a004d, #0080a6, #e6338c, #ffcc33, #33e666)",brightness:"medium",temperature:"neutral",saturation:"medium",family:"twilight"},{id:11,label:"Chromatic",preview:"linear-gradient(90deg, #ff0066, #00ff88, #0066ff, #ff0066)",brightness:"bright",temperature:"neutral",saturation:"high",family:"neon"},{id:12,label:"Golden Liminal",preview:"linear-gradient(90deg, #ffbf4d, #d9738c, #664db3, #261a59)",brightness:"medium",temperature:"warm",saturation:"medium",family:"twilight"},{id:13,label:"OK Rainbow",preview:"linear-gradient(90deg, #ff6b8a, #e6a040, #8fbf40, #40bfbf, #6b8aff, #bf40bf)",brightness:"medium",temperature:"neutral",saturation:"medium",family:"spectrum"},{id:14,label:"Synesthetic",preview:"linear-gradient(90deg, #7733ff, #cc33cc, #ff33aa, #ff66cc)",brightness:"medium",temperature:"cool",saturation:"high",family:"cosmic"},{id:15,label:"Entropy",preview:"linear-gradient(90deg, #00ffff, #1a0033, #ff4d00, #00cc33)",brightness:"medium",temperature:"neutral",saturation:"high",family:"neon"},{id:16,label:"Velvet Depths",preview:"linear-gradient(90deg, #1f142e, #8c59a6, #e6d9f2, #402659)",brightness:"dark",temperature:"cool",saturation:"low",family:"cosmic"},{id:17,label:"Solar Flare",preview:"linear-gradient(90deg, #1a0000, #cc1a00, #ff9900, #ffffb3)",brightness:"bright",temperature:"warm",saturation:"high",family:"fire"},{id:18,label:"Void Pulse",preview:"linear-gradient(90deg, #000000, #660019, #cc3366, #000000)",brightness:"dark",temperature:"warm",saturation:"low",family:"cosmic"},{id:19,label:"Starless Night",preview:"linear-gradient(90deg, #050a14, #1a3a66, #050a14)",brightness:"dark",temperature:"cool",saturation:"low",family:"ocean"},{id:20,label:"Event Horizon",preview:"linear-gradient(90deg, #000000, #000000, #ff6619, #99ccff, #000000)",brightness:"dark",temperature:"neutral",saturation:"medium",family:"cosmic"},{id:21,label:"Cyberpunk",preview:"linear-gradient(90deg, #0d0221, #ff1493, #00ffff, #9400d3)",brightness:"medium",temperature:"cool",saturation:"high",family:"neon"},{id:22,label:"Crimson Mono",preview:"linear-gradient(90deg, #2a0a0a, #8b0000, #cd5c5c, #f5deb3)",brightness:"medium",temperature:"warm",saturation:"medium",family:"fire"},{id:23,label:"Earth Tones",preview:"linear-gradient(90deg, #cc7351, #9caf88, #a0522d, #b87333)",brightness:"medium",temperature:"warm",saturation:"medium",family:"earth"},{id:24,label:"True Complement",preview:"linear-gradient(90deg, #0066ff, #ff6600)",brightness:"bright",temperature:"neutral",saturation:"high",family:"spectrum"},{id:25,label:"Noir",preview:"linear-gradient(90deg, #000000, #333333, #666666, #ffffff, #00ffff)",brightness:"dark",temperature:"neutral",saturation:"low",family:"twilight"},{id:26,label:"Sepia",preview:"linear-gradient(90deg, #3d2314, #704214, #f5deb3, #faebd7)",brightness:"medium",temperature:"warm",saturation:"low",family:"twilight"}],Ls={spectrum:[0,5,7,13,24],fire:[1,12,17,18,22],ocean:[2,6,9,19],cosmic:[3,14,16,18,20],neon:[4,11,15,21],twilight:[8,10,12,25,26],earth:[23]};function nt(t){return vt.find(e=>e.id===t)}const wt=Pe({lastChangeTime:0,cooldown:2}),kt=2.5;function ut(t,e){return t+Math.random()*(e-t)}function lt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function dt(t){if(t.length===0)throw new Error("randomChoice called with empty array");return t[lt(0,t.length-1)]}function Bs(t,e){let s=0;for(const[l,i]of t)if(i.enabled&&l!==e){const a=nt(i.properties.theme);a&&(s+=ks[a.brightness])}return s}function Ns(t){return vt.filter(e=>t.includes(e.brightness))}function Ps(t,e){const s={};for(const[a,o]of t)if(o.enabled&&a!==e){const n=nt(o.properties.theme);n&&(s[n.family]=(s[n.family]||0)+1)}let l=0,i=null;for(const[a,o]of Object.entries(s))o>l&&(l=o,i=a);return i}function Fs(t,e){const s=Bs(t,e),l=Ps(t,e);let i;s>=kt?i=["dark"]:s>=kt-.5?i=["dark","medium"]:i=["dark","medium","bright"];const a=Ns(i);if(a.length===0)return 0;if(l&&Math.random()<.5){const o=Ls[l],n=a.filter(r=>o.includes(r.id));if(n.length>0)return dt(n).id}if(Math.random()<.3){const o=new Set;for(const[n,r]of t)if(r.enabled&&n!==e){const u=nt(r.properties.theme);u&&o.add(u.temperature)}if(o.size===1){const n=[...o][0];let r=null;if(n==="warm"?r="cool":n==="cool"&&(r="warm"),r){const u=a.filter(d=>d.temperature===r);if(u.length>0)return dt(u).id}}}return dt(a).id}function Rs(t){const e=nt(t);if(!e)return{min:.3,max:.7};switch(e.brightness){case"dark":return{min:.5,max:.9};case"medium":return{min:.3,max:.7};case"bright":return{min:.2,max:.5}}}function Os(t){const e=rt(me);if(!e.randomizerEnabled)return;const s=rt(wt),l=performance.now()/1e3;let i=e.randomizerCooldown;if(e.randomizerMode==="chaos"&&(i*=.25),e.randomizerMode==="subtle"&&(i*=2.5),l-s.lastChangeTime<i)return;let a=.6;if(e.randomizerMode==="chaos"&&(a=.4),e.randomizerMode==="subtle"&&(a=.8),t<a)return;const o=rt(Re),n=qe.filter(d=>{const c=o.get(d.id);return d.randomizable!==!1&&(c?.includeInRandomizer||c?.includeInStrobe)});if(n.length===0)return;const r=n[lt(0,n.length-1)];o.get(r.id)&&(Re.update(d=>{const c=d.get(r.id);if(!c)return d;if(e.randomizerTogglesLayers&&c.includeInStrobe){let m=e.randomizerToggleChance;e.strobeMode==="pulse"&&(m=.8),e.strobeMode==="drift"&&(m=.05),Math.random()<m&&(c.enabled=!c.enabled)}if(c.enabled&&c.includeInRandomizer){const m=qe.find(v=>v.id===r.id);if(!m)return d;let b=1;e.randomizerMode==="flow"&&(b=.5),e.randomizerMode==="subtle"&&(b=.2);for(const v of m.properties)if(v.randomizable&&!(Math.random()>b)){if(v.id==="theme"){if(e.randomizerMode==="subtle"&&Math.random()>.1)continue;c.properties.theme=Fs(d,r.id);continue}if(v.id==="intensity"){const S=Rs(c.properties.theme);c.properties.intensity=ut(S.min,S.max);continue}if((v.type==="float"||v.type==="int")&&v.min!==void 0&&v.max!==void 0){const S=v.randomMin??v.min,E=v.randomMax??v.max;let R;if(v.type==="int"||v.step&&v.step>=1?R=lt(S,E):R=ut(S,E),e.randomizerMode!=="chaos"){const A=c.properties[v.id],_=e.randomizerMode==="subtle"?.1:.3,k=(E-S)*_,H=Math.max(S,A-k),D=Math.min(E,A+k);v.step&&v.step>=1?R=lt(Math.floor(H),Math.ceil(D)):R=ut(H,D)}c.properties[v.id]=R;continue}if(v.type==="boolean"){const S=c.properties[v.id],E=typeof S=="boolean"?!S:!v.default;c.properties[v.id]=E;continue}}}return d}),wt.update(d=>({...d,lastChangeTime:l})))}const qs={position:{x:.5,y:.5},velocity:{x:0,y:0},speed:0,isDown:!1,clickPosition:{x:.5,y:.5},isInside:!1},tt=Pe(qs),St=.15,Hs=.1;let Xe={x:0,y:0},ct=0;function Ge(t,e,s){return Math.min(Math.max(t,e),s)}const Us=at(tt,t=>(Xe.x+=(t.velocity.x-Xe.x)*St,Xe.y+=(t.velocity.y-Xe.y)*St,ct+=(t.speed-ct)*Hs,{x:t.position.x,y:t.position.y,velocityX:Ge(Xe.x,-1,1),velocityY:Ge(Xe.y,-1,1),speed:Ge(ct,0,1),down:t.isDown?1:0,clickX:t.clickPosition.x,clickY:t.clickPosition.y,inside:t.isInside?1:0}));function $s(t,e,s,l){tt.update(i=>{const a=Ge((t-s.left)/s.width,0,1),o=Ge((e-s.top)/s.height,0,1),n=Math.max(l,1),r=(a-i.position.x)/n*16.67,u=(o-i.position.y)/n*16.67,d=Math.sqrt(r*r+u*u);return{...i,position:{x:a,y:o},velocity:{x:r,y:u},speed:Ge(d*10,0,1),isInside:!0}})}function js(t,e,s){tt.update(l=>{const i=Ge((t-s.left)/s.width,0,1),a=Ge((e-s.top)/s.height,0,1);return{...l,isDown:!0,clickPosition:{x:i,y:a}}})}function Gs(){tt.update(t=>({...t,isDown:!1}))}function Ws(){tt.update(t=>({...t,isInside:!1,velocity:{x:0,y:0},speed:0}))}const Ys={fps:0,frameTime:0,targetFps:60,cpuSavings:0,mode:"normal"},rs=Pe(Ys);function Ks(t){let e,s,l;return{c(){e=w("canvas"),this.h()},l(i){e=y(i,"CANVAS",{class:!0,"aria-label":!0}),M(e).forEach(p),this.h()},h(){h(e,"class","visualizer-canvas svelte-1nin8xa"),h(e,"aria-label","Audio reactive canvas")},m(i,a){U(i,e,a),t[11](e),s||(l=[le(e,"click",t[1]),le(e,"touchend",t[2]),le(e,"mousemove",t[3]),le(e,"mousedown",t[4]),le(e,"mouseup",t[5]),le(e,"mouseleave",t[6])],s=!0)},p:pe,i:pe,o:pe,d(i){i&&p(e),t[11](null),s=!1,Ye(l)}}}const Zs=1e3,st=32;function Xs(t,e,s){let l,i,a,o;Me(t,me,I=>s(10,l=I)),Me(t,Vs,I=>s(22,i=I)),Me(t,Us,I=>s(23,a=I)),Me(t,Se,I=>s(24,o=I));let n,r=null,u=null,d,c=0,m=0,b=0,v=null,S=null,E=null;function R(){v=document.createElement("canvas"),v.width=st,v.height=st,S=v.getContext("2d"),E=document.querySelector('link[rel="icon"]'),E||(E=document.createElement("link"),E.rel="icon",E.type="image/png",document.head.appendChild(E))}function A(I){if(!v||!S||!E||!n||I-b<Zs)return;b=I;const g=Math.min(n.width,n.height),z=(n.width-g)/2,q=(n.height-g)/2;S.drawImage(n,z,q,g,g,0,0,st,st);try{E.href=v.toDataURL("image/png")}catch{}}async function _(){u||(u=new ps);const I=await u.enable();return it.set(I),I&&r?.setAudioBuffer(u.getSharedBuffer()),I}function T(){u&&(u.disable(),u=null),it.set(!1)}function k(I){const g=1e3/l.targetFps,z=l.targetFps<60;if(z){const L=I-c;if(L<g){d=window.setTimeout(()=>requestAnimationFrame(k),g-L);return}}z?d=window.setTimeout(()=>requestAnimationFrame(k),g):d=requestAnimationFrame(k);const q=(I-c)/1e3;if(c=I,u?.isEnabled()){const L=u.update(q);Qt.set(L),r&&!r.usesSharedBuffer()&&r.updateAudio(L);const P=o.beatGate,Y=L.beat>P;xt.update(ie=>{if(o.autoEnabled){if(Y)return 1;const ve=.5+o.autoDecay*3.5;return Math.max(0,ie-q*ve)}return 0}),Os(L.beat)}if(r){r.updateMouse(a);const L=qe.map(P=>({id:P.id,enabled:!0,uniforms:i}));r.updateConfig(L)}A(I)}Kt(()=>{if(n){s(9,r=new gs),r.onStats(z=>{z.type==="STATS"&&rs.update(q=>({...q,fps:z.fps,frameTime:z.frameTime}))});const g=u?.getSharedBuffer()??null;r.init(n,g,l.resolutionScale)}c=performance.now(),R(),d=requestAnimationFrame(k)}),ds(()=>{d&&(cancelAnimationFrame(d),clearTimeout(d)),r&&(r.dispose(),s(9,r=null)),u&&(u.disable(),u=null)});function H(){me.update(I=>({...I,panelsVisible:!I.panelsVisible}))}let D=0;function V(I){const g=Date.now();g-D<300&&G(),D=g}async function G(){document.fullscreenElement?(await document.exitFullscreen(),me.update(I=>({...I,fullscreen:!1}))):(await document.documentElement.requestFullscreen(),me.update(I=>({...I,fullscreen:!0})))}function $(I){if(!n)return;const g=performance.now(),z=g-m;m=g;const q=n.getBoundingClientRect();$s(I.clientX,I.clientY,q,z)}function F(I){if(!n)return;const g=n.getBoundingClientRect();js(I.clientX,I.clientY,g)}function ee(){Gs()}function O(){Ws()}function j(I){Ee[I?"unshift":"push"](()=>{n=I,s(0,n)})}return t.$$.update=()=>{t.$$.dirty&1536&&r&&l.resolutionScale&&r.updateResolutionScale(l.resolutionScale)},[n,H,V,$,F,ee,O,_,T,r,l,j]}class Js extends Le{constructor(e){super(),Be(this,e,Xs,Ks,Ve,{enableMicrophone:7,disableMicrophone:8})}get enableMicrophone(){return this.$$.ctx[7]}get disableMicrophone(){return this.$$.ctx[8]}}function Et(t){let e,s,l='<span class="panel-title svelte-1pwarin">CONTROLS</span>',i,a,o,n,r,u,d,c,m='<span class="label">FULLSCR</span>',b,v,S,E,R=t[2].randomizerMode.toUpperCase()+"",A,_,T,k,H,D=t[2].strobeMode.toUpperCase()+"",V,G,$,F,ee=t[5].icon+"",O,j,I=t[5].label.toUpperCase()+"",g,z,q,L,P='<span class="label">HELP</span>',Y,ie,ve='<kbd class="svelte-1pwarin">‚Üë‚Üì</kbd> zoom <kbd class="svelte-1pwarin">‚Üê‚Üí</kbd> speed <kbd class="svelte-1pwarin">M</kbd> mic <kbd class="svelte-1pwarin">F</kbd> full <kbd class="svelte-1pwarin">P</kbd> preset <kbd class="svelte-1pwarin">H</kbd> help',se,ne;function ye(x,Z){return x[3]?el:x[6]?xs:Qs}let we=ye(t),fe=we(t);return{c(){e=w("div"),s=w("div"),s.innerHTML=l,i=N(),a=w("div"),o=w("button"),n=w("span"),r=N(),u=w("span"),fe.c(),d=N(),c=w("button"),c.innerHTML=m,b=N(),v=w("button"),S=w("span"),E=Q("RND: "),A=Q(R),_=N(),T=w("button"),k=w("span"),H=Q("STR: "),V=Q(D),G=N(),$=w("button"),F=w("span"),O=Q(ee),j=N(),g=Q(I),q=N(),L=w("button"),L.innerHTML=P,Y=N(),ie=w("div"),ie.innerHTML=ve,this.h()},l(x){e=y(x,"DIV",{class:!0});var Z=M(e);s=y(Z,"DIV",{class:!0,"data-svelte-h":!0}),he(s)!=="svelte-i65zl2"&&(s.innerHTML=l),i=B(Z),a=y(Z,"DIV",{class:!0});var be=M(a);o=y(be,"BUTTON",{class:!0,title:!0});var Fe=M(o);n=y(Fe,"SPAN",{class:!0}),M(n).forEach(p),r=B(Fe),u=y(Fe,"SPAN",{class:!0});var ae=M(u);fe.l(ae),ae.forEach(p),Fe.forEach(p),d=B(be),c=y(be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),he(c)!=="svelte-1xg66l0"&&(c.innerHTML=m),b=B(be),v=y(be,"BUTTON",{class:!0,title:!0});var C=M(v);S=y(C,"SPAN",{class:!0});var te=M(S);E=J(te,"RND: "),A=J(te,R),te.forEach(p),C.forEach(p),_=B(be),T=y(be,"BUTTON",{class:!0,title:!0});var ze=M(T);k=y(ze,"SPAN",{class:!0});var ke=M(k);H=J(ke,"STR: "),V=J(ke,D),ke.forEach(p),ze.forEach(p),G=B(be),$=y(be,"BUTTON",{class:!0,title:!0});var Ne=M($);F=y(Ne,"SPAN",{class:!0});var Te=M(F);O=J(Te,ee),j=B(Te),g=J(Te,I),Te.forEach(p),Ne.forEach(p),q=B(be),L=y(be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),he(L)!=="svelte-302skm"&&(L.innerHTML=P),be.forEach(p),Y=B(Z),ie=y(Z,"DIV",{class:!0,title:!0,"data-svelte-h":!0}),he(ie)!=="svelte-sbhr6z"&&(ie.innerHTML=ve),Z.forEach(p),this.h()},h(){h(s,"class","panel-header svelte-1pwarin"),h(n,"class","indicator svelte-1pwarin"),K(n,"on",t[6]),h(u,"class","label"),h(o,"class","ctrl-btn mic svelte-1pwarin"),o.disabled=t[3],h(o,"title","Enable microphone to let visuals react to music and sounds around you"),K(o,"active",t[6]),K(o,"loading",t[3]),h(c,"class","ctrl-btn svelte-1pwarin"),h(c,"title","Enter or exit fullscreen mode for an immersive experience"),K(c,"active",t[2].fullscreen),h(S,"class","label"),h(v,"class","ctrl-btn svelte-1pwarin"),h(v,"title","Cycle randomizer mode (Flow / Chaos / Subtle)"),h(k,"class","label"),h(T,"class","ctrl-btn svelte-1pwarin"),h(T,"title","Cycle strobe mode (Flash / Pulse / Drift)"),h(F,"class","label"),h($,"class","ctrl-btn device-preset svelte-1pwarin"),h($,"title",z="Device preset: "+t[5].label+" ("+t[5].targetFps+"fps, "+Math.round(t[5].resolutionScale*100)+"% res, max "+t[5].maxActiveLayers+" layers)"),K($,"eco",t[4]),h(L,"class","ctrl-btn svelte-1pwarin"),h(L,"title","Show help and information (press H)"),h(a,"class","controls-grid svelte-1pwarin"),h(ie,"class","panel-footer svelte-1pwarin"),h(ie,"title","Keyboard shortcuts for quick access"),h(e,"class","panel controls-panel svelte-1pwarin")},m(x,Z){U(x,e,Z),f(e,s),f(e,i),f(e,a),f(a,o),f(o,n),f(o,r),f(o,u),fe.m(u,null),f(a,d),f(a,c),f(a,b),f(a,v),f(v,S),f(S,E),f(S,A),f(a,_),f(a,T),f(T,k),f(k,H),f(k,V),f(a,G),f(a,$),f($,F),f(F,O),f(F,j),f(F,g),f(a,q),f(a,L),f(e,Y),f(e,ie),se||(ne=[le(o,"click",t[7]),le(c,"click",t[8]),le(v,"click",is),le(T,"click",as),le($,"click",ls),le(L,"click",function(){cs(t[0])&&t[0].apply(this,arguments)})],se=!0)},p(x,Z){t=x,Z&64&&K(n,"on",t[6]),we!==(we=ye(t))&&(fe.d(1),fe=we(t),fe&&(fe.c(),fe.m(u,null))),Z&8&&(o.disabled=t[3]),Z&64&&K(o,"active",t[6]),Z&8&&K(o,"loading",t[3]),Z&4&&K(c,"active",t[2].fullscreen),Z&4&&R!==(R=t[2].randomizerMode.toUpperCase()+"")&&ce(A,R),Z&4&&D!==(D=t[2].strobeMode.toUpperCase()+"")&&ce(V,D),Z&32&&ee!==(ee=t[5].icon+"")&&ce(O,ee),Z&32&&I!==(I=t[5].label.toUpperCase()+"")&&ce(g,I),Z&32&&z!==(z="Device preset: "+t[5].label+" ("+t[5].targetFps+"fps, "+Math.round(t[5].resolutionScale*100)+"% res, max "+t[5].maxActiveLayers+" layers)")&&h($,"title",z),Z&16&&K($,"eco",t[4])},d(x){x&&p(e),fe.d(),se=!1,Ye(ne)}}}function Qs(t){let e;return{c(){e=Q("MIC OFF")},l(s){e=J(s,"MIC OFF")},m(s,l){U(s,e,l)},d(s){s&&p(e)}}}function xs(t){let e;return{c(){e=Q("MIC ON")},l(s){e=J(s,"MIC ON")},m(s,l){U(s,e,l)},d(s){s&&p(e)}}}function el(t){let e;return{c(){e=Q("...")},l(s){e=J(s,"...")},m(s,l){U(s,e,l)},d(s){s&&p(e)}}}function tl(t){let e,s=t[1]&&Et(t);return{c(){s&&s.c(),e=_e()},l(l){s&&s.l(l),e=_e()},m(l,i){s&&s.m(l,i),U(l,e,i)},p(l,[i]){l[1]?s?s.p(l,i):(s=Et(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:pe,o:pe,d(l){l&&p(e),s&&s.d(l)}}}function sl(t,e,s){let l,i,a,o;Me(t,it,v=>s(6,a=v)),Me(t,me,v=>s(2,o=v));let{onEnableMic:n}=e,{onDisableMic:r}=e,{onShowInfo:u}=e,{visible:d=!0}=e,c=!1;async function m(){if(a){r();return}s(3,c=!0),await n(),s(3,c=!1)}async function b(){document.fullscreenElement?(await document.exitFullscreen(),me.update(v=>({...v,fullscreen:!1}))):(await document.documentElement.requestFullscreen(),me.update(v=>({...v,fullscreen:!0})))}return t.$$set=v=>{"onEnableMic"in v&&s(9,n=v.onEnableMic),"onDisableMic"in v&&s(10,r=v.onDisableMic),"onShowInfo"in v&&s(0,u=v.onShowInfo),"visible"in v&&s(1,d=v.visible)},t.$$.update=()=>{t.$$.dirty&4&&s(5,l=et[o.devicePreset]),t.$$.dirty&4&&s(4,i=o.devicePreset!=="desktop")},[u,d,o,c,i,l,a,m,b,n,r]}class ll extends Le{constructor(e){super(),Be(this,e,sl,tl,Ve,{onEnableMic:9,onDisableMic:10,onShowInfo:0,visible:1})}}function Mt(t){let e,s=t[6](t[0])+"",l;return{c(){e=w("span"),l=Q(s),this.h()},l(i){e=y(i,"SPAN",{class:!0});var a=M(e);l=J(a,s),a.forEach(p),this.h()},h(){h(e,"class","slider-value svelte-13dvwfr")},m(i,a){U(i,e,a),f(e,l)},p(i,a){a&65&&s!==(s=i[6](i[0])+"")&&ce(l,s)},d(i){i&&p(e)}}}function il(t){let e,s,l,i,a,o,n,r,u,d=t[5]&&Mt(t);return{c(){e=w("div"),s=w("div"),l=w("span"),i=Q(t[1]),a=N(),d&&d.c(),o=N(),n=w("input"),this.h()},l(c){e=y(c,"DIV",{class:!0});var m=M(e);s=y(m,"DIV",{class:!0});var b=M(s);l=y(b,"SPAN",{class:!0});var v=M(l);i=J(v,t[1]),v.forEach(p),a=B(b),d&&d.l(b),b.forEach(p),o=B(m),n=y(m,"INPUT",{type:!0,min:!0,max:!0,step:!0,"aria-label":!0,class:!0}),m.forEach(p),this.h()},h(){h(l,"class","slider-label svelte-13dvwfr"),h(s,"class","slider-header svelte-13dvwfr"),h(n,"type","range"),h(n,"min",t[2]),h(n,"max",t[3]),h(n,"step",t[4]),n.value=t[0],h(n,"aria-label",t[1]),h(n,"class","svelte-13dvwfr"),h(e,"class","slider svelte-13dvwfr"),K(e,"compact",t[7])},m(c,m){U(c,e,m),f(e,s),f(s,l),f(l,i),f(s,a),d&&d.m(s,null),f(e,o),f(e,n),r||(u=le(n,"input",t[8]),r=!0)},p(c,[m]){m&2&&ce(i,c[1]),c[5]?d?d.p(c,m):(d=Mt(c),d.c(),d.m(s,null)):d&&(d.d(1),d=null),m&4&&h(n,"min",c[2]),m&8&&h(n,"max",c[3]),m&16&&h(n,"step",c[4]),m&1&&(n.value=c[0]),m&2&&h(n,"aria-label",c[1]),m&128&&K(e,"compact",c[7])},i:pe,o:pe,d(c){c&&p(e),d&&d.d(),r=!1,u()}}}function al(t,e,s){let{label:l}=e,{value:i}=e,{min:a=0}=e,{max:o=1}=e,{step:n=.01}=e,{showValue:r=!0}=e,{formatValue:u=b=>b.toFixed(2)}=e,{compact:d=!0}=e;const c=ht();function m(b){const v=b.target;s(0,i=parseFloat(v.value)),c("input",i)}return t.$$set=b=>{"label"in b&&s(1,l=b.label),"value"in b&&s(0,i=b.value),"min"in b&&s(2,a=b.min),"max"in b&&s(3,o=b.max),"step"in b&&s(4,n=b.step),"showValue"in b&&s(5,r=b.showValue),"formatValue"in b&&s(6,u=b.formatValue),"compact"in b&&s(7,d=b.compact)},[i,l,a,o,n,r,u,d,m]}class Ae extends Le{constructor(e){super(),Be(this,e,al,il,Ve,{label:1,value:0,min:2,max:3,step:4,showValue:5,formatValue:6,compact:7})}}function nl(t){let e,s,l,i,a,o,n;return{c(){e=w("button"),s=w("span"),l=N(),i=w("span"),a=Q(t[1]),this.h()},l(r){e=y(r,"BUTTON",{class:!0,"aria-pressed":!0,type:!0});var u=M(e);s=y(u,"SPAN",{class:!0}),M(s).forEach(p),l=B(u),i=y(u,"SPAN",{class:!0});var d=M(i);a=J(d,t[1]),d.forEach(p),u.forEach(p),this.h()},h(){h(s,"class","toggle-indicator svelte-1qxicao"),h(i,"class","toggle-label svelte-1qxicao"),h(e,"class","toggle svelte-1qxicao"),h(e,"aria-pressed",t[0]),e.disabled=t[2],h(e,"type","button"),K(e,"checked",t[0]),K(e,"disabled",t[2]),K(e,"compact",t[3])},m(r,u){U(r,e,u),f(e,s),f(e,l),f(e,i),f(i,a),o||(n=le(e,"click",t[4]),o=!0)},p(r,[u]){u&2&&ce(a,r[1]),u&1&&h(e,"aria-pressed",r[0]),u&4&&(e.disabled=r[2]),u&1&&K(e,"checked",r[0]),u&4&&K(e,"disabled",r[2]),u&8&&K(e,"compact",r[3])},i:pe,o:pe,d(r){r&&p(e),o=!1,n()}}}function rl(t,e,s){let{label:l}=e,{checked:i=!1}=e,{disabled:a=!1}=e,{compact:o=!0}=e;const n=ht();function r(){a||(s(0,i=!i),n("change",i))}return t.$$set=u=>{"label"in u&&s(1,l=u.label),"checked"in u&&s(0,i=u.checked),"disabled"in u&&s(2,a=u.disabled),"compact"in u&&s(3,o=u.compact)},[i,l,a,o,r]}class os extends Le{constructor(e){super(),Be(this,e,rl,nl,Ve,{label:1,checked:0,disabled:2,compact:3})}}function Tt(t,e,s){const l=t.slice();return l[8]=e[s],l}function It(t){let e;return{c(){e=w("span"),this.h()},l(s){e=y(s,"SPAN",{class:!0,style:!0}),M(e).forEach(p),this.h()},h(){h(e,"class","select-preview svelte-1weciec"),Qe(e,"background",t[2].find(t[6])?.preview)},m(s,l){U(s,e,l)},p(s,l){l&5&&Qe(e,"background",s[2].find(s[6])?.preview)},d(s){s&&p(e)}}}function Ct(t){let e,s=t[8].label+"",l,i;return{c(){e=w("option"),l=Q(s),this.h()},l(a){e=y(a,"OPTION",{});var o=M(e);l=J(o,s),o.forEach(p),this.h()},h(){e.__value=i=t[8].value,bt(e,e.__value)},m(a,o){U(a,e,o),f(e,l)},p(a,o){o&4&&s!==(s=a[8].label+"")&&ce(l,s),o&4&&i!==(i=a[8].value)&&(e.__value=i,bt(e,e.__value))},d(a){a&&p(e)}}}function ol(t){let e,s,l,i,a,o=t[2].find(t[5])?.preview,n,r,u,d,c=o&&It(t),m=We(t[2]),b=[];for(let v=0;v<m.length;v+=1)b[v]=Ct(Tt(t,m,v));return{c(){e=w("div"),s=w("span"),l=Q(t[1]),i=N(),a=w("div"),c&&c.c(),n=N(),r=w("select");for(let v=0;v<b.length;v+=1)b[v].c();this.h()},l(v){e=y(v,"DIV",{class:!0});var S=M(e);s=y(S,"SPAN",{class:!0});var E=M(s);l=J(E,t[1]),E.forEach(p),i=B(S),a=y(S,"DIV",{class:!0});var R=M(a);c&&c.l(R),n=B(R),r=y(R,"SELECT",{"aria-label":!0,class:!0});var A=M(r);for(let _=0;_<b.length;_+=1)b[_].l(A);A.forEach(p),R.forEach(p),S.forEach(p),this.h()},h(){h(s,"class","select-label svelte-1weciec"),h(r,"aria-label",t[1]),h(r,"class","svelte-1weciec"),h(a,"class","select-container svelte-1weciec"),h(e,"class","select-wrapper svelte-1weciec"),K(e,"compact",t[3])},m(v,S){U(v,e,S),f(e,s),f(s,l),f(e,i),f(e,a),c&&c.m(a,null),f(a,n),f(a,r);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(r,null);mt(r,t[0]),u||(d=le(r,"change",t[4]),u=!0)},p(v,[S]){if(S&2&&ce(l,v[1]),S&5&&(o=v[2].find(v[5])?.preview),o?c?c.p(v,S):(c=It(v),c.c(),c.m(a,n)):c&&(c.d(1),c=null),S&4){m=We(v[2]);let E;for(E=0;E<m.length;E+=1){const R=Tt(v,m,E);b[E]?b[E].p(R,S):(b[E]=Ct(R),b[E].c(),b[E].m(r,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=m.length}S&5&&mt(r,v[0]),S&2&&h(r,"aria-label",v[1]),S&8&&K(e,"compact",v[3])},i:pe,o:pe,d(v){v&&p(e),c&&c.d(),Zt(b,v),u=!1,d()}}}function ul(t,e,s){let{label:l}=e,{value:i}=e,{options:a=[]}=e,{compact:o=!0}=e;const n=ht();function r(c){const m=c.target;s(0,i=isNaN(Number(m.value))?m.value:Number(m.value)),n("change",i)}const u=c=>c.value===i,d=c=>c.value===i;return t.$$set=c=>{"label"in c&&s(1,l=c.label),"value"in c&&s(0,i=c.value),"options"in c&&s(2,a=c.options),"compact"in c&&s(3,o=c.compact)},[i,l,a,o,r,u,d]}class us extends Le{constructor(e){super(),Be(this,e,ul,ol,Ve,{label:1,value:0,options:2,compact:3})}}function dl(t){let e,s,l,i,a,o,n,r,u;return{c(){e=w("div"),s=w("span"),l=Q(t[0]),i=N(),a=w("div"),o=w("div"),n=N(),r=w("span"),u=Q(t[1]),this.h()},l(d){e=y(d,"DIV",{class:!0});var c=M(e);s=y(c,"SPAN",{class:!0});var m=M(s);l=J(m,t[0]),m.forEach(p),i=B(c),a=y(c,"DIV",{class:!0});var b=M(a);o=y(b,"DIV",{class:!0,style:!0}),M(o).forEach(p),b.forEach(p),n=B(c),r=y(c,"SPAN",{class:!0});var v=M(r);u=J(v,t[1]),v.forEach(p),c.forEach(p),this.h()},h(){h(s,"class","level-label svelte-2vktfp"),h(o,"class","level-fill svelte-2vktfp"),Qe(o,"width",t[2]+"%"),h(a,"class","level-bar svelte-2vktfp"),h(r,"class","level-value svelte-2vktfp"),h(e,"class","level-meter svelte-2vktfp")},m(d,c){U(d,e,c),f(e,s),f(s,l),f(e,i),f(e,a),f(a,o),f(e,n),f(e,r),f(r,u)},p(d,[c]){c&1&&ce(l,d[0]),c&4&&Qe(o,"width",d[2]+"%"),c&2&&ce(u,d[1])},i:pe,o:pe,d(d){d&&p(e)}}}function cl(t,e,s){let l,i,{label:a}=e,{value:o=0}=e,{max:n=1}=e;return t.$$set=r=>{"label"in r&&s(0,a=r.label),"value"in r&&s(3,o=r.value),"max"in r&&s(4,n=r.max)},t.$$.update=()=>{t.$$.dirty&24&&s(2,l=Math.min(100,o/n*100)),t.$$.dirty&8&&s(1,i=o.toFixed(2))},[a,i,l,o,n]}class Je extends Le{constructor(e){super(),Be(this,e,cl,dl,Ve,{label:0,value:3,max:4})}}function Dt(t,e,s){const l=t.slice();return l[29]=e[s].definition,l[30]=e[s].state,l}function zt(t,e,s){const l=t.slice();return l[33]=e[s],l}function At(t){let e,s,l,i,a,o,n,r="LAYERS",u,d,c,m,b,v,S,E="?",R,A,_,T,k="RANDOM",H,D,V="STROBE",G,$,F=[],ee=new Map,O,j,I,g=t[6]&&Vt(t),z=We(t[3]);const q=L=>L[29].id;for(let L=0;L<z.length;L+=1){let P=Dt(t,z,L),Y=q(P);ee.set(Y,F[L]=Pt(Y,P))}return{c(){e=w("div"),s=w("div"),l=w("button"),i=w("span"),o=N(),n=w("span"),n.textContent=r,u=N(),d=w("span"),c=Q(t[2]),m=Q("/"),b=Q(t[1]),v=N(),S=w("button"),S.textContent=E,R=N(),g&&g.c(),A=N(),_=w("div"),T=w("button"),T.textContent=k,H=N(),D=w("button"),D.textContent=V,G=N(),$=w("div");for(let L=0;L<F.length;L+=1)F[L].c();this.h()},l(L){e=y(L,"DIV",{class:!0});var P=M(e);s=y(P,"DIV",{class:!0});var Y=M(s);l=y(Y,"BUTTON",{class:!0,title:!0,type:!0});var ie=M(l);i=y(ie,"SPAN",{class:!0}),M(i).forEach(p),ie.forEach(p),o=B(Y),n=y(Y,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),he(n)!=="svelte-1k3t9ew"&&(n.textContent=r),u=B(Y),d=y(Y,"SPAN",{class:!0,title:!0});var ve=M(d);c=J(ve,t[2]),m=J(ve,"/"),b=J(ve,t[1]),ve.forEach(p),v=B(Y),S=y(Y,"BUTTON",{class:!0,title:!0,type:!0,"data-svelte-h":!0}),he(S)!=="svelte-bv0qfb"&&(S.textContent=E),Y.forEach(p),R=B(P),g&&g.l(P),A=B(P),_=y(P,"DIV",{class:!0});var se=M(_);T=y(se,"BUTTON",{class:!0,title:!0,type:!0,"data-svelte-h":!0}),he(T)!=="svelte-oljq6x"&&(T.textContent=k),H=B(se),D=y(se,"BUTTON",{class:!0,title:!0,type:!0,"data-svelte-h":!0}),he(D)!=="svelte-1j3wa1w"&&(D.textContent=V),se.forEach(p),G=B(P),$=y(P,"DIV",{class:!0});var ne=M($);for(let ye=0;ye<F.length;ye+=1)F[ye].l(ne);ne.forEach(p),P.forEach(p),this.h()},h(){h(i,"class","master-indicator svelte-1bwrpos"),h(l,"class","master-toggle svelte-1bwrpos"),h(l,"title",a=t[7]?"Turn off all layers":"Turn on all layers"),h(l,"type","button"),K(l,"active",t[7]),h(n,"class","panel-title svelte-1bwrpos"),h(n,"title","Visual effect layers - toggle and customize each one"),h(d,"class","panel-count svelte-1bwrpos"),h(d,"title","Active layers / max allowed"),K(d,"at-limit",t[8]),h(S,"class","help-btn svelte-1bwrpos"),h(S,"title","What do these buttons mean?"),h(S,"type","button"),h(s,"class","panel-header svelte-1bwrpos"),h(T,"class","global-btn svelte-1bwrpos"),h(T,"title","Automatically change visual settings on every beat for variety"),h(T,"type","button"),K(T,"active",t[4].randomizerEnabled),h(D,"class","global-btn strobe svelte-1bwrpos"),h(D,"title","Flash layers on/off with the beat for a strobe-like effect"),h(D,"type","button"),K(D,"active",t[4].randomizerTogglesLayers),h(_,"class","global-controls svelte-1bwrpos"),h($,"class","layer-list svelte-1bwrpos"),h(e,"class","panel layers-panel svelte-1bwrpos")},m(L,P){U(L,e,P),f(e,s),f(s,l),f(l,i),f(s,o),f(s,n),f(s,u),f(s,d),f(d,c),f(d,m),f(d,b),f(s,v),f(s,S),f(e,R),g&&g.m(e,null),f(e,A),f(e,_),f(_,T),f(_,H),f(_,D),f(e,G),f(e,$);for(let Y=0;Y<F.length;Y+=1)F[Y]&&F[Y].m($,null);O=!0,j||(I=[le(l,"click",t[9]),le(S,"click",t[18]),le(T,"click",Ms),le(D,"click",Ts)],j=!0)},p(L,P){(!O||P[0]&128&&a!==(a=L[7]?"Turn off all layers":"Turn on all layers"))&&h(l,"title",a),(!O||P[0]&128)&&K(l,"active",L[7]),(!O||P[0]&4)&&ce(c,L[2]),(!O||P[0]&2)&&ce(b,L[1]),(!O||P[0]&256)&&K(d,"at-limit",L[8]),L[6]?g?g.p(L,P):(g=Vt(L),g.c(),g.m(e,A)):g&&(g.d(1),g=null),(!O||P[0]&16)&&K(T,"active",L[4].randomizerEnabled),(!O||P[0]&16)&&K(D,"active",L[4].randomizerTogglesLayers),P[0]&130362&&(z=We(L[3]),He(),F=Jt(F,P,q,1,L,z,ee,$,Xt,Pt,null,Dt),Ue())},i(L){if(!O){for(let P=0;P<z.length;P+=1)W(F[P]);O=!0}},o(L){for(let P=0;P<F.length;P+=1)X(F[P]);O=!1},d(L){L&&p(e),g&&g.d();for(let P=0;P<F.length;P+=1)F[P].d();j=!1,Ye(I)}}}function Vt(t){let e,s,l,i="How It Works",a,o,n="√ó",r,u,d='<div class="help-section svelte-1bwrpos"><div class="help-title svelte-1bwrpos">Layer Controls</div> <div class="help-item svelte-1bwrpos"><span class="help-icon dot green svelte-1bwrpos"></span> <span>Turn layer on/off</span></div> <div class="help-item svelte-1bwrpos"><span class="help-icon box svelte-1bwrpos">+</span> <span>Show more settings</span></div></div> <div class="help-section svelte-1bwrpos"><div class="help-title svelte-1bwrpos">Auto Effects</div> <div class="help-item svelte-1bwrpos"><span class="help-icon box purple svelte-1bwrpos">R</span> <span>Auto-change colors &amp; style on beat</span></div> <div class="help-item svelte-1bwrpos"><span class="help-icon box pink svelte-1bwrpos">S</span> <span>Flash on/off with music</span></div></div> <div class="help-section svelte-1bwrpos"><div class="help-title svelte-1bwrpos">Master Switches</div> <div class="help-item svelte-1bwrpos"><span class="help-badge svelte-1bwrpos">RANDOM</span> <span>Enable/disable all R buttons</span></div> <div class="help-item svelte-1bwrpos"><span class="help-badge pink svelte-1bwrpos">STROBE</span> <span>Enable/disable all S buttons</span></div></div> <div class="help-tip svelte-1bwrpos">Dashed border = ready when master is ON</div>',c,m;return{c(){e=w("div"),s=w("div"),l=w("span"),l.textContent=i,a=N(),o=w("button"),o.textContent=n,r=N(),u=w("div"),u.innerHTML=d,this.h()},l(b){e=y(b,"DIV",{class:!0});var v=M(e);s=y(v,"DIV",{class:!0});var S=M(s);l=y(S,"SPAN",{"data-svelte-h":!0}),he(l)!=="svelte-72lls3"&&(l.textContent=i),a=B(S),o=y(S,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),he(o)!=="svelte-1eac6wf"&&(o.textContent=n),S.forEach(p),r=B(v),u=y(v,"DIV",{class:!0,"data-svelte-h":!0}),he(u)!=="svelte-37j6hi"&&(u.innerHTML=d),v.forEach(p),this.h()},h(){h(o,"class","help-close svelte-1bwrpos"),h(o,"type","button"),h(s,"class","help-header svelte-1bwrpos"),h(u,"class","help-content svelte-1bwrpos"),h(e,"class","help-popup svelte-1bwrpos")},m(b,v){U(b,e,v),f(e,s),f(s,l),f(s,a),f(s,o),f(e,r),f(e,u),c||(m=le(o,"click",t[19]),c=!0)},p:pe,d(b){b&&p(e),c=!1,m()}}}function Lt(t){let e,s,l,i,a,o,n,r,u;function d(){return t[22](t[29])}function c(){return t[23](t[29])}return{c(){e=w("button"),s=Q("R"),i=N(),a=w("button"),o=Q("S"),this.h()},l(m){e=y(m,"BUTTON",{class:!0,title:!0,type:!0});var b=M(e);s=J(b,"R"),b.forEach(p),i=B(m),a=y(m,"BUTTON",{class:!0,title:!0,type:!0});var v=M(a);o=J(v,"S"),v.forEach(p),this.h()},h(){h(e,"class","quick-btn random-btn svelte-1bwrpos"),h(e,"title",l=t[30].includeInRandomizer?t[4].randomizerEnabled?"Included in randomizer - click to exclude":"Will be included when global RANDOM is enabled":"Include in randomizer - properties will change automatically"),h(e,"type","button"),K(e,"active",t[30].includeInRandomizer&&t[4].randomizerEnabled),K(e,"pending",t[30].includeInRandomizer&&!t[4].randomizerEnabled),h(a,"class","quick-btn strobe-btn svelte-1bwrpos"),h(a,"title",n=t[30].includeInStrobe?t[4].randomizerTogglesLayers?"Included in strobe - click to exclude":"Will be included when global STROBE is enabled":"Include in strobe - layer can flash on/off with the beat"),h(a,"type","button"),K(a,"active",t[30].includeInStrobe&&t[4].randomizerTogglesLayers),K(a,"pending",t[30].includeInStrobe&&!t[4].randomizerTogglesLayers)},m(m,b){U(m,e,b),f(e,s),U(m,i,b),U(m,a,b),f(a,o),r||(u=[le(e,"click",d),le(a,"click",c)],r=!0)},p(m,b){t=m,b[0]&24&&l!==(l=t[30].includeInRandomizer?t[4].randomizerEnabled?"Included in randomizer - click to exclude":"Will be included when global RANDOM is enabled":"Include in randomizer - properties will change automatically")&&h(e,"title",l),b[0]&24&&K(e,"active",t[30].includeInRandomizer&&t[4].randomizerEnabled),b[0]&24&&K(e,"pending",t[30].includeInRandomizer&&!t[4].randomizerEnabled),b[0]&24&&n!==(n=t[30].includeInStrobe?t[4].randomizerTogglesLayers?"Included in strobe - click to exclude":"Will be included when global STROBE is enabled":"Include in strobe - layer can flash on/off with the beat")&&h(a,"title",n),b[0]&24&&K(a,"active",t[30].includeInStrobe&&t[4].randomizerTogglesLayers),b[0]&24&&K(a,"pending",t[30].includeInStrobe&&!t[4].randomizerTogglesLayers)},d(m){m&&(p(e),p(i),p(a)),r=!1,Ye(u)}}}function Bt(t){let e,s=[],l=new Map,i,a=We(t[29].properties);const o=n=>n[33].id;for(let n=0;n<a.length;n+=1){let r=zt(t,a,n),u=o(r);l.set(u,s[n]=Nt(u,r))}return{c(){e=w("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var r=M(e);for(let u=0;u<s.length;u+=1)s[u].l(r);r.forEach(p),this.h()},h(){h(e,"class","layer-controls svelte-1bwrpos")},m(n,r){U(n,e,r);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);i=!0},p(n,r){r[0]&63496&&(a=We(n[29].properties),He(),s=Jt(s,r,o,1,n,a,l,e,Xt,Nt,null,zt),Ue())},i(n){if(!i){for(let r=0;r<a.length;r+=1)W(s[r]);i=!0}},o(n){for(let r=0;r<s.length;r+=1)X(s[r]);i=!1},d(n){n&&p(e);for(let r=0;r<s.length;r+=1)s[r].d()}}}function fl(t){let e,s=t[11](t[33])+"",l,i,a;return{c(){e=w("div"),l=Q(s),i=Q(`: Unsupported
                `),this.h()},l(o){e=y(o,"DIV",{class:!0,title:!0});var n=M(e);l=J(n,s),i=J(n,`: Unsupported
                `),n.forEach(p),this.h()},h(){h(e,"class","unsupported-prop svelte-1bwrpos"),h(e,"title",a=`Unsupported parameter type: ${t[33].type}`)},m(o,n){U(o,e,n),f(e,l),f(e,i)},p(o,n){n[0]&8&&s!==(s=o[11](o[33])+"")&&ce(l,s),n[0]&8&&a!==(a=`Unsupported parameter type: ${o[33].type}`)&&h(e,"title",a)},i:pe,o:pe,d(o){o&&p(e)}}}function hl(t){let e,s,l,i,a;function o(...n){return t[27](t[29],t[33],...n)}return s=new os({props:{label:t[11](t[33]),checked:t[15](t[30].properties[t[33].id],t[33].default)}}),s.$on("change",o),{c(){e=w("div"),de(s.$$.fragment),l=N(),this.h()},l(n){e=y(n,"DIV",{title:!0});var r=M(e);ue(s.$$.fragment,r),l=B(r),r.forEach(p),this.h()},h(){h(e,"title",i=t[33].ui?.tooltip??t[33].label)},m(n,r){U(n,e,r),oe(s,e,null),f(e,l),a=!0},p(n,r){t=n;const u={};r[0]&8&&(u.label=t[11](t[33])),r[0]&8&&(u.checked=t[15](t[30].properties[t[33].id],t[33].default)),s.$set(u),(!a||r[0]&8&&i!==(i=t[33].ui?.tooltip??t[33].label))&&h(e,"title",i)},i(n){a||(W(s.$$.fragment,n),a=!0)},o(n){X(s.$$.fragment,n),a=!1},d(n){n&&p(e),re(s)}}}function vl(t){let e,s,l,i,a;function o(...n){return t[26](t[29],t[33],...n)}return s=new us({props:{label:t[11](t[33]),value:t[30].properties[t[33].id]??t[33].default,options:t[14](t[33])}}),s.$on("change",o),{c(){e=w("div"),de(s.$$.fragment),l=N(),this.h()},l(n){e=y(n,"DIV",{title:!0});var r=M(e);ue(s.$$.fragment,r),l=B(r),r.forEach(p),this.h()},h(){h(e,"title",i=t[33].ui?.tooltip??t[33].label)},m(n,r){U(n,e,r),oe(s,e,null),f(e,l),a=!0},p(n,r){t=n;const u={};r[0]&8&&(u.label=t[11](t[33])),r[0]&8&&(u.value=t[30].properties[t[33].id]??t[33].default),r[0]&8&&(u.options=t[14](t[33])),s.$set(u),(!a||r[0]&8&&i!==(i=t[33].ui?.tooltip??t[33].label))&&h(e,"title",i)},i(n){a||(W(s.$$.fragment,n),a=!0)},o(n){X(s.$$.fragment,n),a=!1},d(n){n&&p(e),re(s)}}}function pl(t){let e,s,l,i,a;function o(...n){return t[25](t[29],t[33],...n)}return s=new Ae({props:{label:t[11](t[33]),value:t[30].properties[t[33].id]??t[33].default,min:t[33].min,max:t[33].max,step:t[13](t[33])}}),s.$on("input",o),{c(){e=w("div"),de(s.$$.fragment),l=N(),this.h()},l(n){e=y(n,"DIV",{title:!0});var r=M(e);ue(s.$$.fragment,r),l=B(r),r.forEach(p),this.h()},h(){h(e,"title",i=t[12](t[33]))},m(n,r){U(n,e,r),oe(s,e,null),f(e,l),a=!0},p(n,r){t=n;const u={};r[0]&8&&(u.label=t[11](t[33])),r[0]&8&&(u.value=t[30].properties[t[33].id]??t[33].default),r[0]&8&&(u.min=t[33].min),r[0]&8&&(u.max=t[33].max),r[0]&8&&(u.step=t[13](t[33])),s.$set(u),(!a||r[0]&8&&i!==(i=t[12](t[33])))&&h(e,"title",i)},i(n){a||(W(s.$$.fragment,n),a=!0)},o(n){X(s.$$.fragment,n),a=!1},d(n){n&&p(e),re(s)}}}function Nt(t,e){let s,l,i,a,o;const n=[pl,vl,hl,fl],r=[];function u(d,c){return d[33].type==="float"||d[33].type==="int"?0:d[33].type==="select"?1:d[33].type==="boolean"?2:3}return l=u(e),i=r[l]=n[l](e),{key:t,first:null,c(){s=_e(),i.c(),a=_e(),this.h()},l(d){s=_e(),i.l(d),a=_e(),this.h()},h(){this.first=s},m(d,c){U(d,s,c),r[l].m(d,c),U(d,a,c),o=!0},p(d,c){e=d;let m=l;l=u(e),l===m?r[l].p(e,c):(He(),X(r[m],1,1,()=>{r[m]=null}),Ue(),i=r[l],i?i.p(e,c):(i=r[l]=n[l](e),i.c()),W(i,1),i.m(a.parentNode,a))},i(d){o||(W(i),o=!0)},o(d){X(i),o=!1},d(d){d&&(p(s),p(a)),r[l].d(d)}}}function Pt(t,e){let s,l,i,a,o,n,r,u,d=e[29].label+"",c,m,b,v,S,E,R=e[5].has(e[29].id)?"‚àí":"+",A,_,T=e[5].has(e[29].id),k,H,D,V;function G(){return e[20](e[29])}function $(){return e[21](e[29])}let F=e[29].randomizable!==!1&&Lt(e);function ee(){return e[24](e[29])}let O=T&&Bt(e);return{key:t,first:null,c(){s=w("div"),l=w("div"),i=w("button"),a=w("span"),r=N(),u=w("button"),c=Q(d),b=N(),v=w("div"),F&&F.c(),S=N(),E=w("button"),A=Q(R),_=N(),O&&O.c(),k=N(),this.h()},l(j){s=y(j,"DIV",{class:!0});var I=M(s);l=y(I,"DIV",{class:!0});var g=M(l);i=y(g,"BUTTON",{class:!0,type:!0,title:!0});var z=M(i);a=y(z,"SPAN",{class:!0}),M(a).forEach(p),z.forEach(p),r=B(g),u=y(g,"BUTTON",{class:!0,type:!0,title:!0});var q=M(u);c=J(q,d),q.forEach(p),b=B(g),v=y(g,"DIV",{class:!0});var L=M(v);F&&F.l(L),S=B(L),E=y(L,"BUTTON",{class:!0,type:!0,title:!0});var P=M(E);A=J(P,R),P.forEach(p),L.forEach(p),g.forEach(p),_=B(I),O&&O.l(I),k=B(I),I.forEach(p),this.h()},h(){h(a,"class","indicator svelte-1bwrpos"),K(a,"active",e[30].enabled),h(i,"class","layer-toggle svelte-1bwrpos"),h(i,"type","button"),h(i,"title",o=!e[30].enabled&&e[8]?`Layer limit reached (${e[1]} max)`:"Turn this visual effect on or off"),i.disabled=n=!e[30].enabled&&e[8],h(u,"class","layer-name svelte-1bwrpos"),h(u,"type","button"),h(u,"title",m=e[29].description+" - click to adjust settings"),h(E,"class","quick-btn expand-btn svelte-1bwrpos"),h(E,"type","button"),h(E,"title","Expand to see detailed controls for this layer"),h(v,"class","layer-quick svelte-1bwrpos"),h(l,"class","layer-row svelte-1bwrpos"),h(s,"class","layer-item svelte-1bwrpos"),K(s,"disabled",!e[30].enabled),K(s,"expanded",e[5].has(e[29].id)),this.first=s},m(j,I){U(j,s,I),f(s,l),f(l,i),f(i,a),f(l,r),f(l,u),f(u,c),f(l,b),f(l,v),F&&F.m(v,null),f(v,S),f(v,E),f(E,A),f(s,_),O&&O.m(s,null),f(s,k),H=!0,D||(V=[le(i,"click",G),le(u,"click",$),le(E,"click",ee)],D=!0)},p(j,I){e=j,(!H||I[0]&8)&&K(a,"active",e[30].enabled),(!H||I[0]&266&&o!==(o=!e[30].enabled&&e[8]?`Layer limit reached (${e[1]} max)`:"Turn this visual effect on or off"))&&h(i,"title",o),(!H||I[0]&264&&n!==(n=!e[30].enabled&&e[8]))&&(i.disabled=n),(!H||I[0]&8)&&d!==(d=e[29].label+"")&&ce(c,d),(!H||I[0]&8&&m!==(m=e[29].description+" - click to adjust settings"))&&h(u,"title",m),e[29].randomizable!==!1?F?F.p(e,I):(F=Lt(e),F.c(),F.m(v,S)):F&&(F.d(1),F=null),(!H||I[0]&40)&&R!==(R=e[5].has(e[29].id)?"‚àí":"+")&&ce(A,R),I[0]&40&&(T=e[5].has(e[29].id)),T?O?(O.p(e,I),I[0]&40&&W(O,1)):(O=Bt(e),O.c(),W(O,1),O.m(s,k)):O&&(He(),X(O,1,1,()=>{O=null}),Ue()),(!H||I[0]&8)&&K(s,"disabled",!e[30].enabled),(!H||I[0]&40)&&K(s,"expanded",e[5].has(e[29].id))},i(j){H||(W(O),H=!0)},o(j){X(O),H=!1},d(j){j&&p(s),F&&F.d(),O&&O.d(),D=!1,Ye(V)}}}function ml(t){let e,s,l=t[0]&&At(t);return{c(){l&&l.c(),e=_e()},l(i){l&&l.l(i),e=_e()},m(i,a){l&&l.m(i,a),U(i,e,a),s=!0},p(i,a){i[0]?l?(l.p(i,a),a[0]&1&&W(l,1)):(l=At(i),l.c(),W(l,1),l.m(e.parentNode,e)):l&&(He(),X(l,1,1,()=>{l=null}),Ue())},i(i){s||(W(l),s=!0)},o(i){X(l),s=!1},d(i){i&&p(e),l&&l.d(i)}}}function bl(t,e,s){let l,i,a,o,n,r,u;Me(t,me,g=>s(4,r=g)),Me(t,Re,g=>s(17,u=g));let{visible:d=!0}=e,c=new Set,m=!1;function b(){As(!i,o)}function v(g){Cs(g,o)}const S=vt.map(g=>({value:g.id,label:g.label,preview:g.preview})),E=g=>g.ui?.shortLabel??g.label.slice(0,4),R=g=>g.ui?.tooltip??(g.id==="intensity"?"How visible/strong this effect is":g.id==="zoom"?"Scale/size of the effect pattern":g.id==="sensitivity"?"How much this layer reacts to audio":g.label),A=g=>g.type==="int"?g.step??1:g.step??.01,_=g=>g.id==="theme"?S:g.type==="select"?g.options:[],T=(g,z)=>typeof g=="boolean"?g:z;function k(g){c.has(g)?c.delete(g):c.add(g),s(5,c=new Set(c))}const H=()=>s(6,m=!m),D=()=>s(6,m=!1),V=g=>v(g.id),G=g=>k(g.id),$=g=>Ds(g.id),F=g=>zs(g.id),ee=g=>k(g.id),O=(g,z,q)=>ot(g.id,z.id,q.detail),j=(g,z,q)=>ot(g.id,z.id,q.detail),I=(g,z,q)=>ot(g.id,z.id,q.detail);return t.$$set=g=>{"visible"in g&&s(0,d=g.visible)},t.$$.update=()=>{t.$$.dirty[0]&131072&&s(3,l=qe.map(g=>({definition:g,state:u.get(g.id)})).filter(g=>g.state)),t.$$.dirty[0]&8&&s(7,i=l.some(g=>g.state.enabled)),t.$$.dirty[0]&131072&&s(2,a=ns(u)),t.$$.dirty[0]&16&&s(1,o=r.maxActiveLayers),t.$$.dirty[0]&6&&s(8,n=a>=o)},[d,o,a,l,r,c,m,i,n,b,v,E,R,A,_,T,k,u,H,D,V,G,$,F,ee,O,j,I]}class gl extends Le{constructor(e){super(),Be(this,e,bl,ml,Ve,{visible:0},null,[-1,-1])}}function Ft(t){let e,s,l='<span class="panel-title svelte-smr4zp">LEVELS</span>',i,a,o,n,r,u,d,c,m,b,v,S,E,R,A,_,T,k,H,D;return n=new Je({props:{label:"HI",value:t[1].raw.highs}}),d=new Je({props:{label:"MD",value:t[1].raw.mids}}),b=new Je({props:{label:"LO",value:t[1].raw.lows}}),E=new Je({props:{label:"TR",value:t[1].raw.treble}}),_=new Je({props:{label:"BS",value:t[1].raw.bass}}),H=new Je({props:{label:"BT",value:t[1].raw.beat}}),{c(){e=w("div"),s=w("div"),s.innerHTML=l,i=N(),a=w("div"),o=w("div"),de(n.$$.fragment),r=N(),u=w("div"),de(d.$$.fragment),c=N(),m=w("div"),de(b.$$.fragment),v=N(),S=w("div"),de(E.$$.fragment),R=N(),A=w("div"),de(_.$$.fragment),T=N(),k=w("div"),de(H.$$.fragment),this.h()},l(V){e=y(V,"DIV",{class:!0});var G=M(e);s=y(G,"DIV",{class:!0,title:!0,"data-svelte-h":!0}),he(s)!=="svelte-1qdq6z0"&&(s.innerHTML=l),i=B(G),a=y(G,"DIV",{class:!0});var $=M(a);o=y($,"DIV",{title:!0});var F=M(o);ue(n.$$.fragment,F),F.forEach(p),r=B($),u=y($,"DIV",{title:!0});var ee=M(u);ue(d.$$.fragment,ee),ee.forEach(p),c=B($),m=y($,"DIV",{title:!0});var O=M(m);ue(b.$$.fragment,O),O.forEach(p),v=B($),S=y($,"DIV",{title:!0});var j=M(S);ue(E.$$.fragment,j),j.forEach(p),R=B($),A=y($,"DIV",{title:!0});var I=M(A);ue(_.$$.fragment,I),I.forEach(p),T=B($),k=y($,"DIV",{title:!0});var g=M(k);ue(H.$$.fragment,g),g.forEach(p),$.forEach(p),G.forEach(p),this.h()},h(){h(s,"class","panel-header svelte-smr4zp"),h(s,"title","Real-time audio levels from your microphone"),h(o,"title","High frequencies - cymbals, hi-hats, bright sounds"),h(u,"title","Mid frequencies - vocals, guitars, main melody"),h(m,"title","Low frequencies - bass, kick drum, rumble"),h(S,"title","Treble - combined high-pitched sounds"),h(A,"title","Bass - combined low-pitched sounds"),h(k,"title","Beat detection - pulses when drums or strong beats hit"),h(a,"class","levels-grid svelte-smr4zp"),h(e,"class","panel levels-panel svelte-smr4zp")},m(V,G){U(V,e,G),f(e,s),f(e,i),f(e,a),f(a,o),oe(n,o,null),f(a,r),f(a,u),oe(d,u,null),f(a,c),f(a,m),oe(b,m,null),f(a,v),f(a,S),oe(E,S,null),f(a,R),f(a,A),oe(_,A,null),f(a,T),f(a,k),oe(H,k,null),D=!0},p(V,G){const $={};G&2&&($.value=V[1].raw.highs),n.$set($);const F={};G&2&&(F.value=V[1].raw.mids),d.$set(F);const ee={};G&2&&(ee.value=V[1].raw.lows),b.$set(ee);const O={};G&2&&(O.value=V[1].raw.treble),E.$set(O);const j={};G&2&&(j.value=V[1].raw.bass),_.$set(j);const I={};G&2&&(I.value=V[1].raw.beat),H.$set(I)},i(V){D||(W(n.$$.fragment,V),W(d.$$.fragment,V),W(b.$$.fragment,V),W(E.$$.fragment,V),W(_.$$.fragment,V),W(H.$$.fragment,V),D=!0)},o(V){X(n.$$.fragment,V),X(d.$$.fragment,V),X(b.$$.fragment,V),X(E.$$.fragment,V),X(_.$$.fragment,V),X(H.$$.fragment,V),D=!1},d(V){V&&p(e),re(n),re(d),re(b),re(E),re(_),re(H)}}}function _l(t){let e,s,l=t[0]&&Ft(t);return{c(){l&&l.c(),e=_e()},l(i){l&&l.l(i),e=_e()},m(i,a){l&&l.m(i,a),U(i,e,a),s=!0},p(i,[a]){i[0]?l?(l.p(i,a),a&1&&W(l,1)):(l=Ft(i),l.c(),W(l,1),l.m(e.parentNode,e)):l&&(He(),X(l,1,1,()=>{l=null}),Ue())},i(i){s||(W(l),s=!0)},o(i){X(l),s=!1},d(i){i&&p(e),l&&l.d(i)}}}function yl(t,e,s){let l;Me(t,es,a=>s(1,l=a));let{visible:i=!0}=e;return t.$$set=a=>{"visible"in a&&s(0,i=a.visible)},[i,l]}class wl extends Le{constructor(e){super(),Be(this,e,yl,_l,Ve,{visible:0})}}function Rt(t){let e,s,l,i="TUNING",a,o,n=t[1]?"‚àí":"+",r,u,d,c,m,b,v,S,E,R,A,_,T,k,H,D,V,G;function $(z){t[5](z)}let F={label:"Sens",min:0,max:2,formatValue:t[3]};t[2].sensitivity!==void 0&&(F.value=t[2].sensitivity),m=new Ae({props:F}),Ee.push(()=>De(m,"value",$));function ee(z){t[6](z)}let O={label:"Beat",min:0,max:2,formatValue:t[3]};t[2].beatBoost!==void 0&&(O.value=t[2].beatBoost),E=new Ae({props:O}),Ee.push(()=>De(E,"value",ee));function j(z){t[7](z)}let I={label:"Gate",min:0,max:1,formatValue:t[3]};t[2].beatGate!==void 0&&(I.value=t[2].beatGate),T=new Ae({props:I}),Ee.push(()=>De(T,"value",j));let g=t[1]&&Ot(t);return{c(){e=w("div"),s=w("div"),l=w("span"),l.textContent=i,a=N(),o=w("button"),r=Q(n),u=N(),d=w("div"),c=w("div"),de(m.$$.fragment),v=N(),S=w("div"),de(E.$$.fragment),A=N(),_=w("div"),de(T.$$.fragment),H=N(),g&&g.c(),this.h()},l(z){e=y(z,"DIV",{class:!0});var q=M(e);s=y(q,"DIV",{class:!0});var L=M(s);l=y(L,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),he(l)!=="svelte-hff578"&&(l.textContent=i),a=B(L),o=y(L,"BUTTON",{class:!0,title:!0});var P=M(o);r=J(P,n),P.forEach(p),L.forEach(p),u=B(q),d=y(q,"DIV",{class:!0});var Y=M(d);c=y(Y,"DIV",{title:!0});var ie=M(c);ue(m.$$.fragment,ie),ie.forEach(p),v=B(Y),S=y(Y,"DIV",{title:!0});var ve=M(S);ue(E.$$.fragment,ve),ve.forEach(p),A=B(Y),_=y(Y,"DIV",{title:!0});var se=M(_);ue(T.$$.fragment,se),se.forEach(p),H=B(Y),g&&g.l(Y),Y.forEach(p),q.forEach(p),this.h()},h(){h(l,"class","panel-title svelte-13l7qrq"),h(l,"title","Adjust how visuals respond to audio"),h(o,"class","toggle-advanced svelte-13l7qrq"),h(o,"title","Show more advanced audio controls"),h(s,"class","panel-header svelte-13l7qrq"),h(c,"title","Overall sensitivity - how much visuals react to sound"),h(S,"title","Beat boost - make beat reactions stronger or weaker"),h(_,"title","Beat gate - ignore quiet sounds, only react to loud beats"),h(d,"class","tuning-grid svelte-13l7qrq"),h(e,"class","panel tuning-panel svelte-13l7qrq")},m(z,q){U(z,e,q),f(e,s),f(s,l),f(s,a),f(s,o),f(o,r),f(e,u),f(e,d),f(d,c),oe(m,c,null),f(d,v),f(d,S),oe(E,S,null),f(d,A),f(d,_),oe(T,_,null),f(d,H),g&&g.m(d,null),D=!0,V||(G=le(o,"click",t[4]),V=!0)},p(z,q){(!D||q&2)&&n!==(n=z[1]?"‚àí":"+")&&ce(r,n);const L={};!b&&q&4&&(b=!0,L.value=z[2].sensitivity,Ce(()=>b=!1)),m.$set(L);const P={};!R&&q&4&&(R=!0,P.value=z[2].beatBoost,Ce(()=>R=!1)),E.$set(P);const Y={};!k&&q&4&&(k=!0,Y.value=z[2].beatGate,Ce(()=>k=!1)),T.$set(Y),z[1]?g?(g.p(z,q),q&2&&W(g,1)):(g=Ot(z),g.c(),W(g,1),g.m(d,null)):g&&(He(),X(g,1,1,()=>{g=null}),Ue())},i(z){D||(W(m.$$.fragment,z),W(E.$$.fragment,z),W(T.$$.fragment,z),W(g),D=!0)},o(z){X(m.$$.fragment,z),X(E.$$.fragment,z),X(T.$$.fragment,z),X(g),D=!1},d(z){z&&p(e),re(m),re(E),re(T),g&&g.d(),V=!1,G()}}}function Ot(t){let e,s,l,i,a,o,n,r,u,d,c,m,b,v,S,E,R,A,_,T,k,H,D,V,G,$,F,ee,O,j,I,g,z,q;function L(C){t[8](C)}let P={label:"Hi+",min:0,max:2,formatValue:t[3]};t[2].highsBoost!==void 0&&(P.value=t[2].highsBoost),i=new Ae({props:P}),Ee.push(()=>De(i,"value",L));function Y(C){t[9](C)}let ie={label:"Mid+",min:0,max:2,formatValue:t[3]};t[2].midsBoost!==void 0&&(ie.value=t[2].midsBoost),r=new Ae({props:ie}),Ee.push(()=>De(r,"value",Y));function ve(C){t[10](C)}let se={label:"Low+",min:0,max:2,formatValue:t[3]};t[2].lowsBoost!==void 0&&(se.value=t[2].lowsBoost),m=new Ae({props:se}),Ee.push(()=>De(m,"value",ve));function ne(C){t[11](C)}let ye={label:"Trbl",min:0,max:2,formatValue:t[3]};t[2].trebleBoost!==void 0&&(ye.value=t[2].trebleBoost),E=new Ae({props:ye}),Ee.push(()=>De(E,"value",ne));function we(C){t[12](C)}let fe={label:"Bass",min:0,max:2,formatValue:t[3]};t[2].bassBoost!==void 0&&(fe.value=t[2].bassBoost),T=new Ae({props:fe}),Ee.push(()=>De(T,"value",we));function x(C){t[13](C)}let Z={label:"Min",min:0,max:.1,step:.005,formatValue:t[3]};t[2].minMotion!==void 0&&(Z.value=t[2].minMotion),V=new Ae({props:Z}),Ee.push(()=>De(V,"value",x));function be(C){t[14](C)}let Fe={label:"Auto Suggest"};t[2].autoEnabled!==void 0&&(Fe.checked=t[2].autoEnabled),j=new os({props:Fe}),Ee.push(()=>De(j,"checked",be));let ae=t[2].autoEnabled&&qt(t);return{c(){e=w("div"),s=N(),l=w("div"),de(i.$$.fragment),o=N(),n=w("div"),de(r.$$.fragment),d=N(),c=w("div"),de(m.$$.fragment),v=N(),S=w("div"),de(E.$$.fragment),A=N(),_=w("div"),de(T.$$.fragment),H=N(),D=w("div"),de(V.$$.fragment),$=N(),F=w("div"),ee=N(),O=w("div"),de(j.$$.fragment),g=N(),ae&&ae.c(),z=_e(),this.h()},l(C){e=y(C,"DIV",{class:!0}),M(e).forEach(p),s=B(C),l=y(C,"DIV",{title:!0});var te=M(l);ue(i.$$.fragment,te),te.forEach(p),o=B(C),n=y(C,"DIV",{title:!0});var ze=M(n);ue(r.$$.fragment,ze),ze.forEach(p),d=B(C),c=y(C,"DIV",{title:!0});var ke=M(c);ue(m.$$.fragment,ke),ke.forEach(p),v=B(C),S=y(C,"DIV",{title:!0});var Ne=M(S);ue(E.$$.fragment,Ne),Ne.forEach(p),A=B(C),_=y(C,"DIV",{title:!0});var Te=M(_);ue(T.$$.fragment,Te),Te.forEach(p),H=B(C),D=y(C,"DIV",{title:!0});var $e=M(D);ue(V.$$.fragment,$e),$e.forEach(p),$=B(C),F=y(C,"DIV",{class:!0}),M(F).forEach(p),ee=B(C),O=y(C,"DIV",{title:!0});var xe=M(O);ue(j.$$.fragment,xe),xe.forEach(p),g=B(C),ae&&ae.l(C),z=_e(),this.h()},h(){h(e,"class","divider svelte-13l7qrq"),h(l,"title","Boost high frequency response (cymbals, hi-hats)"),h(n,"title","Boost mid frequency response (vocals, guitars)"),h(c,"title","Boost low frequency response (bass, kick drums)"),h(S,"title","Boost treble (bright, high-pitched sounds)"),h(_,"title","Boost bass (deep, low-pitched sounds)"),h(D,"title","Minimum motion - keep some movement even in silence"),h(F,"class","divider svelte-13l7qrq"),h(O,"title","Automatically adjust settings based on audio levels")},m(C,te){U(C,e,te),U(C,s,te),U(C,l,te),oe(i,l,null),U(C,o,te),U(C,n,te),oe(r,n,null),U(C,d,te),U(C,c,te),oe(m,c,null),U(C,v,te),U(C,S,te),oe(E,S,null),U(C,A,te),U(C,_,te),oe(T,_,null),U(C,H,te),U(C,D,te),oe(V,D,null),U(C,$,te),U(C,F,te),U(C,ee,te),U(C,O,te),oe(j,O,null),U(C,g,te),ae&&ae.m(C,te),U(C,z,te),q=!0},p(C,te){const ze={};!a&&te&4&&(a=!0,ze.value=C[2].highsBoost,Ce(()=>a=!1)),i.$set(ze);const ke={};!u&&te&4&&(u=!0,ke.value=C[2].midsBoost,Ce(()=>u=!1)),r.$set(ke);const Ne={};!b&&te&4&&(b=!0,Ne.value=C[2].lowsBoost,Ce(()=>b=!1)),m.$set(Ne);const Te={};!R&&te&4&&(R=!0,Te.value=C[2].trebleBoost,Ce(()=>R=!1)),E.$set(Te);const $e={};!k&&te&4&&(k=!0,$e.value=C[2].bassBoost,Ce(()=>k=!1)),T.$set($e);const xe={};!G&&te&4&&(G=!0,xe.value=C[2].minMotion,Ce(()=>G=!1)),V.$set(xe);const pt={};!I&&te&4&&(I=!0,pt.checked=C[2].autoEnabled,Ce(()=>I=!1)),j.$set(pt),C[2].autoEnabled?ae?(ae.p(C,te),te&4&&W(ae,1)):(ae=qt(C),ae.c(),W(ae,1),ae.m(z.parentNode,z)):ae&&(He(),X(ae,1,1,()=>{ae=null}),Ue())},i(C){q||(W(i.$$.fragment,C),W(r.$$.fragment,C),W(m.$$.fragment,C),W(E.$$.fragment,C),W(T.$$.fragment,C),W(V.$$.fragment,C),W(j.$$.fragment,C),W(ae),q=!0)},o(C){X(i.$$.fragment,C),X(r.$$.fragment,C),X(m.$$.fragment,C),X(E.$$.fragment,C),X(T.$$.fragment,C),X(V.$$.fragment,C),X(j.$$.fragment,C),X(ae),q=!1},d(C){C&&(p(e),p(s),p(l),p(o),p(n),p(d),p(c),p(v),p(S),p(A),p(_),p(H),p(D),p($),p(F),p(ee),p(O),p(g),p(z)),re(i),re(r),re(m),re(E),re(T),re(V),re(j),ae&&ae.d(C)}}}function qt(t){let e,s,l,i,a,o,n,r,u,d,c,m;function b(_){t[15](_)}let v={label:"Str",min:0,max:1,formatValue:t[3]};t[2].autoStrength!==void 0&&(v.value=t[2].autoStrength),s=new Ae({props:v}),Ee.push(()=>De(s,"value",b));function S(_){t[16](_)}let E={label:"Dec",min:0,max:1,formatValue:t[3]};t[2].autoDecay!==void 0&&(E.value=t[2].autoDecay),o=new Ae({props:E}),Ee.push(()=>De(o,"value",S));function R(_){t[17](_)}let A={label:"Tgt",options:[{value:"all",label:"All"},{value:"energy",label:"Energy"},{value:"treble",label:"Treble"},{value:"beat",label:"Beat"}]};return t[2].autoTarget!==void 0&&(A.value=t[2].autoTarget),d=new us({props:A}),Ee.push(()=>De(d,"value",R)),{c(){e=w("div"),de(s.$$.fragment),i=N(),a=w("div"),de(o.$$.fragment),r=N(),u=w("div"),de(d.$$.fragment),this.h()},l(_){e=y(_,"DIV",{title:!0});var T=M(e);ue(s.$$.fragment,T),T.forEach(p),i=B(_),a=y(_,"DIV",{title:!0});var k=M(a);ue(o.$$.fragment,k),k.forEach(p),r=B(_),u=y(_,"DIV",{title:!0});var H=M(u);ue(d.$$.fragment,H),H.forEach(p),this.h()},h(){h(e,"title","How strongly auto-adjust affects the visuals"),h(a,"title","How quickly auto-adjustments fade back to normal"),h(u,"title","Which audio metric to use for auto-adjustment")},m(_,T){U(_,e,T),oe(s,e,null),U(_,i,T),U(_,a,T),oe(o,a,null),U(_,r,T),U(_,u,T),oe(d,u,null),m=!0},p(_,T){const k={};!l&&T&4&&(l=!0,k.value=_[2].autoStrength,Ce(()=>l=!1)),s.$set(k);const H={};!n&&T&4&&(n=!0,H.value=_[2].autoDecay,Ce(()=>n=!1)),o.$set(H);const D={};!c&&T&4&&(c=!0,D.value=_[2].autoTarget,Ce(()=>c=!1)),d.$set(D)},i(_){m||(W(s.$$.fragment,_),W(o.$$.fragment,_),W(d.$$.fragment,_),m=!0)},o(_){X(s.$$.fragment,_),X(o.$$.fragment,_),X(d.$$.fragment,_),m=!1},d(_){_&&(p(e),p(i),p(a),p(r),p(u)),re(s),re(o),re(d)}}}function kl(t){let e,s,l=t[0]&&Rt(t);return{c(){l&&l.c(),e=_e()},l(i){l&&l.l(i),e=_e()},m(i,a){l&&l.m(i,a),U(i,e,a),s=!0},p(i,[a]){i[0]?l?(l.p(i,a),a&1&&W(l,1)):(l=Rt(i),l.c(),W(l,1),l.m(e.parentNode,e)):l&&(He(),X(l,1,1,()=>{l=null}),Ue())},i(i){s||(W(l),s=!0)},o(i){X(l),s=!1},d(i){i&&p(e),l&&l.d(i)}}}function Sl(t,e,s){let l;Me(t,Se,k=>s(2,l=k));let{visible:i=!0}=e,a=!1;const o=k=>`${Math.round(k*100)}%`,n=()=>s(1,a=!a);function r(k){t.$$.not_equal(l.sensitivity,k)&&(l.sensitivity=k,Se.set(l))}function u(k){t.$$.not_equal(l.beatBoost,k)&&(l.beatBoost=k,Se.set(l))}function d(k){t.$$.not_equal(l.beatGate,k)&&(l.beatGate=k,Se.set(l))}function c(k){t.$$.not_equal(l.highsBoost,k)&&(l.highsBoost=k,Se.set(l))}function m(k){t.$$.not_equal(l.midsBoost,k)&&(l.midsBoost=k,Se.set(l))}function b(k){t.$$.not_equal(l.lowsBoost,k)&&(l.lowsBoost=k,Se.set(l))}function v(k){t.$$.not_equal(l.trebleBoost,k)&&(l.trebleBoost=k,Se.set(l))}function S(k){t.$$.not_equal(l.bassBoost,k)&&(l.bassBoost=k,Se.set(l))}function E(k){t.$$.not_equal(l.minMotion,k)&&(l.minMotion=k,Se.set(l))}function R(k){t.$$.not_equal(l.autoEnabled,k)&&(l.autoEnabled=k,Se.set(l))}function A(k){t.$$.not_equal(l.autoStrength,k)&&(l.autoStrength=k,Se.set(l))}function _(k){t.$$.not_equal(l.autoDecay,k)&&(l.autoDecay=k,Se.set(l))}function T(k){t.$$.not_equal(l.autoTarget,k)&&(l.autoTarget=k,Se.set(l))}return t.$$set=k=>{"visible"in k&&s(0,i=k.visible)},[i,a,l,o,n,r,u,d,c,m,b,v,S,E,R,A,_,T]}class El extends Le{constructor(e){super(),Be(this,e,Sl,kl,Ve,{visible:0})}}function Ht(t,e,s){const l=t.slice();l[17]=e[s];const i=et[l[17]];return l[18]=i,l}function Ut(t){let e,s,l,i="PERFORMANCE",a,o,n=t[4]?"‚àí":"+",r,u,d,c,m,b="FPS",v,S,E=t[3].fps+"",R,A,_,T,k,H,D,V,G="Frame",$,F,ee=t[3].frameTime.toFixed(1)+"",O,j,I,g="ms",z,q,L,P,Y,ie,ve,se=t[7]&&t[5]>0&&$t(t),ne=t[4]&&jt(t);function ye(x,Z){return x[7]?Tl:Ml}let we=ye(t),fe=we(t);return{c(){e=w("div"),s=w("div"),l=w("span"),l.textContent=i,a=N(),o=w("button"),r=Q(n),u=N(),d=w("div"),c=w("div"),m=w("span"),m.textContent=b,v=N(),S=w("span"),R=Q(E),A=N(),_=w("span"),T=Q("/ "),k=Q(t[1]),H=N(),D=w("div"),V=w("span"),V.textContent=G,$=N(),F=w("span"),O=Q(ee),j=N(),I=w("span"),I.textContent=g,z=N(),se&&se.c(),q=N(),ne&&ne.c(),L=N(),P=w("div"),Y=w("span"),fe.c(),this.h()},l(x){e=y(x,"DIV",{class:!0});var Z=M(e);s=y(Z,"DIV",{class:!0});var be=M(s);l=y(be,"SPAN",{class:!0,"data-svelte-h":!0}),he(l)!=="svelte-18fq72a"&&(l.textContent=i),a=B(be),o=y(be,"BUTTON",{class:!0,title:!0});var Fe=M(o);r=J(Fe,n),Fe.forEach(p),be.forEach(p),u=B(Z),d=y(Z,"DIV",{class:!0});var ae=M(d);c=y(ae,"DIV",{class:!0});var C=M(c);m=y(C,"SPAN",{class:!0,"data-svelte-h":!0}),he(m)!=="svelte-1bu4eeu"&&(m.textContent=b),v=B(C),S=y(C,"SPAN",{class:!0,style:!0});var te=M(S);R=J(te,E),te.forEach(p),A=B(C),_=y(C,"SPAN",{class:!0});var ze=M(_);T=J(ze,"/ "),k=J(ze,t[1]),ze.forEach(p),C.forEach(p),H=B(ae),D=y(ae,"DIV",{class:!0});var ke=M(D);V=y(ke,"SPAN",{class:!0,"data-svelte-h":!0}),he(V)!=="svelte-1ikbzr0"&&(V.textContent=G),$=B(ke),F=y(ke,"SPAN",{class:!0});var Ne=M(F);O=J(Ne,ee),Ne.forEach(p),j=B(ke),I=y(ke,"SPAN",{class:!0,"data-svelte-h":!0}),he(I)!=="svelte-13w5gq7"&&(I.textContent=g),ke.forEach(p),z=B(ae),se&&se.l(ae),ae.forEach(p),q=B(Z),ne&&ne.l(Z),L=B(Z),P=y(Z,"DIV",{class:!0});var Te=M(P);Y=y(Te,"SPAN",{class:!0});var $e=M(Y);fe.l($e),$e.forEach(p),Te.forEach(p),Z.forEach(p),this.h()},h(){h(l,"class","panel-title svelte-sstssc"),h(o,"class","toggle-controls svelte-sstssc"),h(o,"title","Show performance controls"),h(s,"class","panel-header svelte-sstssc"),h(m,"class","label svelte-sstssc"),h(S,"class","value svelte-sstssc"),Qe(S,"color",t[6]),h(_,"class","target svelte-sstssc"),h(c,"class","stat svelte-sstssc"),h(V,"class","label svelte-sstssc"),h(F,"class","value svelte-sstssc"),h(I,"class","unit svelte-sstssc"),h(D,"class","stat svelte-sstssc"),h(d,"class","stats-grid svelte-sstssc"),h(Y,"class","hint svelte-sstssc"),h(P,"class","panel-footer svelte-sstssc"),h(e,"class","panel perf-panel svelte-sstssc"),K(e,"eco-mode",t[7])},m(x,Z){U(x,e,Z),f(e,s),f(s,l),f(s,a),f(s,o),f(o,r),f(e,u),f(e,d),f(d,c),f(c,m),f(c,v),f(c,S),f(S,R),f(c,A),f(c,_),f(_,T),f(_,k),f(d,H),f(d,D),f(D,V),f(D,$),f(D,F),f(F,O),f(D,j),f(D,I),f(d,z),se&&se.m(d,null),f(e,q),ne&&ne.m(e,null),f(e,L),f(e,P),f(P,Y),fe.m(Y,null),ie||(ve=le(o,"click",t[13]),ie=!0)},p(x,Z){Z&16&&n!==(n=x[4]?"‚àí":"+")&&ce(r,n),Z&8&&E!==(E=x[3].fps+"")&&ce(R,E),Z&64&&Qe(S,"color",x[6]),Z&2&&ce(k,x[1]),Z&8&&ee!==(ee=x[3].frameTime.toFixed(1)+"")&&ce(O,ee),x[7]&&x[5]>0?se?se.p(x,Z):(se=$t(x),se.c(),se.m(d,null)):se&&(se.d(1),se=null),x[4]?ne?ne.p(x,Z):(ne=jt(x),ne.c(),ne.m(e,L)):ne&&(ne.d(1),ne=null),we===(we=ye(x))&&fe?fe.p(x,Z):(fe.d(1),fe=we(x),fe&&(fe.c(),fe.m(Y,null))),Z&128&&K(e,"eco-mode",x[7])},d(x){x&&p(e),se&&se.d(),ne&&ne.d(),fe.d(),ie=!1,ve()}}}function $t(t){let e,s,l="Saved",i,a,o,n,r;return{c(){e=w("div"),s=w("span"),s.textContent=l,i=N(),a=w("span"),o=Q("~"),n=Q(t[5]),r=Q("%"),this.h()},l(u){e=y(u,"DIV",{class:!0});var d=M(e);s=y(d,"SPAN",{class:!0,"data-svelte-h":!0}),he(s)!=="svelte-dz9cv6"&&(s.textContent=l),i=B(d),a=y(d,"SPAN",{class:!0});var c=M(a);o=J(c,"~"),n=J(c,t[5]),r=J(c,"%"),c.forEach(p),d.forEach(p),this.h()},h(){h(s,"class","label svelte-sstssc"),h(a,"class","value success svelte-sstssc"),h(e,"class","stat savings svelte-sstssc")},m(u,d){U(u,e,d),f(e,s),f(e,i),f(e,a),f(a,o),f(a,n),f(a,r)},p(u,d){d&32&&ce(n,u[5])},d(u){u&&p(e)}}}function jt(t){let e,s,l,i,a,o="Device Preset",n,r,u,d,c,m,b="FPS Limit",v,S,E,R,A,_,T="Resolution",k,H,D,V,G,$,F,ee="Max Layers",O,j,I,g=We(t[11]),z=[];for(let q=0;q<g.length;q+=1)z[q]=Gt(Ht(t,g,q));return{c(){e=w("div"),s=N(),l=w("div"),i=w("div"),a=w("span"),a.textContent=o,n=N(),r=w("div");for(let q=0;q<z.length;q+=1)z[q].c();u=N(),d=w("div"),c=w("div"),m=w("span"),m.textContent=b,v=N(),S=w("span"),E=Q(t[1]),R=N(),A=w("div"),_=w("span"),_.textContent=T,k=N(),H=w("span"),D=Q(t[9]),V=Q("%"),G=N(),$=w("div"),F=w("span"),F.textContent=ee,O=N(),j=w("span"),I=Q(t[8]),this.h()},l(q){e=y(q,"DIV",{class:!0}),M(e).forEach(p),s=B(q),l=y(q,"DIV",{class:!0});var L=M(l);i=y(L,"DIV",{class:!0});var P=M(i);a=y(P,"SPAN",{class:!0,"data-svelte-h":!0}),he(a)!=="svelte-qrzmpu"&&(a.textContent=o),n=B(P),r=y(P,"DIV",{class:!0});var Y=M(r);for(let x=0;x<z.length;x+=1)z[x].l(Y);Y.forEach(p),P.forEach(p),u=B(L),d=y(L,"DIV",{class:!0});var ie=M(d);c=y(ie,"DIV",{class:!0});var ve=M(c);m=y(ve,"SPAN",{class:!0,"data-svelte-h":!0}),he(m)!=="svelte-unnghm"&&(m.textContent=b),v=B(ve),S=y(ve,"SPAN",{class:!0});var se=M(S);E=J(se,t[1]),se.forEach(p),ve.forEach(p),R=B(ie),A=y(ie,"DIV",{class:!0});var ne=M(A);_=y(ne,"SPAN",{class:!0,"data-svelte-h":!0}),he(_)!=="svelte-767f9k"&&(_.textContent=T),k=B(ne),H=y(ne,"SPAN",{class:!0});var ye=M(H);D=J(ye,t[9]),V=J(ye,"%"),ye.forEach(p),ne.forEach(p),G=B(ie),$=y(ie,"DIV",{class:!0});var we=M($);F=y(we,"SPAN",{class:!0,"data-svelte-h":!0}),he(F)!=="svelte-1kvlchu"&&(F.textContent=ee),O=B(we),j=y(we,"SPAN",{class:!0});var fe=M(j);I=J(fe,t[8]),fe.forEach(p),we.forEach(p),ie.forEach(p),L.forEach(p),this.h()},h(){h(e,"class","divider svelte-sstssc"),h(a,"class","section-label svelte-sstssc"),h(r,"class","presets svelte-sstssc"),h(i,"class","preset-section svelte-sstssc"),h(m,"class","setting-label svelte-sstssc"),h(S,"class","setting-value svelte-sstssc"),h(c,"class","setting-row svelte-sstssc"),h(_,"class","setting-label svelte-sstssc"),h(H,"class","setting-value svelte-sstssc"),h(A,"class","setting-row svelte-sstssc"),h(F,"class","setting-label svelte-sstssc"),h(j,"class","setting-value svelte-sstssc"),h($,"class","setting-row svelte-sstssc"),h(d,"class","settings-summary svelte-sstssc"),h(l,"class","controls-grid svelte-sstssc")},m(q,L){U(q,e,L),U(q,s,L),U(q,l,L),f(l,i),f(i,a),f(i,n),f(i,r);for(let P=0;P<z.length;P+=1)z[P]&&z[P].m(r,null);f(l,u),f(l,d),f(d,c),f(c,m),f(c,v),f(c,S),f(S,E),f(d,R),f(d,A),f(A,_),f(A,k),f(A,H),f(H,D),f(H,V),f(d,G),f(d,$),f($,F),f($,O),f($,j),f(j,I)},p(q,L){if(L&2052){g=We(q[11]);let P;for(P=0;P<g.length;P+=1){const Y=Ht(q,g,P);z[P]?z[P].p(Y,L):(z[P]=Gt(Y),z[P].c(),z[P].m(r,null))}for(;P<z.length;P+=1)z[P].d(1);z.length=g.length}L&2&&ce(E,q[1]),L&512&&ce(D,q[9]),L&256&&ce(I,q[8])},d(q){q&&(p(e),p(s),p(l)),Zt(z,q)}}}function Gt(t){let e,s,l=t[18].icon+"",i,a,o,n=t[18].label+"",r,u,d,c;function m(){return t[14](t[17])}return{c(){e=w("button"),s=w("span"),i=Q(l),a=N(),o=w("span"),r=Q(n),u=N(),this.h()},l(b){e=y(b,"BUTTON",{class:!0,title:!0});var v=M(e);s=y(v,"SPAN",{class:!0});var S=M(s);i=J(S,l),S.forEach(p),a=B(v),o=y(v,"SPAN",{class:!0});var E=M(o);r=J(E,n),E.forEach(p),u=B(v),v.forEach(p),this.h()},h(){h(s,"class","preset-icon svelte-sstssc"),h(o,"class","preset-name svelte-sstssc"),h(e,"class","preset-btn svelte-sstssc"),h(e,"title",t[18].label+": "+t[18].targetFps+"fps, "+Math.round(t[18].resolutionScale*100)+"% res, max "+t[18].maxActiveLayers+" layers"),K(e,"active",t[2]===t[17])},m(b,v){U(b,e,v),f(e,s),f(s,i),f(e,a),f(e,o),f(o,r),f(e,u),d||(c=le(e,"click",m),d=!0)},p(b,v){t=b,v&2052&&K(e,"active",t[2]===t[17])},d(b){b&&p(e),d=!1,c()}}}function Ml(t){let e;return{c(){e=Q("üñ•Ô∏è Full quality mode")},l(s){e=J(s,"üñ•Ô∏è Full quality mode")},m(s,l){U(s,e,l)},p:pe,d(s){s&&p(e)}}}function Tl(t){let e=t[10].icon+"",s,l,i=t[10].label+"",a,o,n,r;return{c(){s=Q(e),l=N(),a=Q(i),o=Q(" mode ("),n=Q(t[5]),r=Q("% lighter)")},l(u){s=J(u,e),l=B(u),a=J(u,i),o=J(u," mode ("),n=J(u,t[5]),r=J(u,"% lighter)")},m(u,d){U(u,s,d),U(u,l,d),U(u,a,d),U(u,o,d),U(u,n,d),U(u,r,d)},p(u,d){d&1024&&e!==(e=u[10].icon+"")&&ce(s,e),d&1024&&i!==(i=u[10].label+"")&&ce(a,i),d&32&&ce(n,u[5])},d(u){u&&(p(s),p(l),p(a),p(o),p(n),p(r))}}}function Il(t){let e,s=t[0]&&Ut(t);return{c(){s&&s.c(),e=_e()},l(l){s&&s.l(l),e=_e()},m(l,i){s&&s.m(l,i),U(l,e,i)},p(l,[i]){l[0]?s?s.p(l,i):(s=Ut(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:pe,o:pe,d(l){l&&p(e),s&&s.d(l)}}}function Cl(t,e,s){let l,i,a,o,n,r,u,d,c,m;Me(t,me,A=>s(12,c=A)),Me(t,rs,A=>s(3,m=A));let{visible:b=!0}=e,v=!1;const S=["phone","laptop","desktop"],E=()=>s(4,v=!v),R=A=>Es(A);return t.$$set=A=>{"visible"in A&&s(0,b=A.visible)},t.$$.update=()=>{t.$$.dirty&4096&&s(2,l=c.devicePreset),t.$$.dirty&4&&s(10,i=et[l]),t.$$.dirty&4096&&s(1,a=c.targetFps),t.$$.dirty&4096&&s(9,o=Math.round(c.resolutionScale*100)),t.$$.dirty&4096&&s(8,n=c.maxActiveLayers),t.$$.dirty&4&&s(7,r=l!=="desktop"),t.$$.dirty&10&&s(6,u=m.fps>=a*.9?"var(--color-success)":m.fps>=a*.5?"var(--color-warning, #f59e0b)":"var(--color-error, #ef4444)"),t.$$.dirty&4096&&Math.round((1-c.resolutionScale)*100),t.$$.dirty&2,t.$$.dirty&4098&&s(5,d=Math.round((1-a/60*c.resolutionScale)*100))},[b,a,l,m,v,d,u,r,n,o,i,S,c,E,R]}class Dl extends Le{constructor(e){super(),Be(this,e,Cl,Il,Ve,{visible:0})}}function Wt(t){let e,s,l,i="‚úï",a,o,n='<h1 id="info-title" class="svelte-8uygvi">SOUNDART</h1> <p class="tagline svelte-8uygvi">Audio-reactive WebGL visualizer that transforms sound into mesmerizing visuals in real-time.</p>',r,u,d='<section class="svelte-8uygvi"><h2 class="svelte-8uygvi">üé§ Getting Started</h2> <ol class="svelte-8uygvi"><li class="svelte-8uygvi">Click <strong class="svelte-8uygvi">MIC ON</strong> to enable microphone</li> <li class="svelte-8uygvi">Play music or make sounds</li> <li class="svelte-8uygvi">Watch the visuals react!</li></ol></section> <section class="svelte-8uygvi"><h2 class="svelte-8uygvi">‚å®Ô∏è Keyboard Shortcuts</h2> <div class="shortcuts svelte-8uygvi"><div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">‚Üë</kbd><span>Zoom in</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">‚Üì</kbd><span>Zoom out</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">‚Üí</kbd><span>Speed up</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">‚Üê</kbd><span>Speed down</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">M</kbd><span>Toggle microphone</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">F</kbd><span>Toggle fullscreen</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">H</kbd><span>Show/hide this help</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">R</kbd><span>Cycle randomizer modes</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">S</kbd><span>Cycle strobe modes</span></div> <div class="shortcut svelte-8uygvi"><kbd class="svelte-8uygvi">P</kbd><span>Cycle device presets</span></div></div></section> <section class="svelte-8uygvi"><h2 class="svelte-8uygvi">üì± Touch Controls</h2> <div class="shortcuts svelte-8uygvi"><div class="shortcut svelte-8uygvi"><span class="gesture svelte-8uygvi">Single tap</span><span>Toggle panels</span></div> <div class="shortcut svelte-8uygvi"><span class="gesture svelte-8uygvi">Double tap</span><span>Toggle fullscreen</span></div></div></section> <section class="svelte-8uygvi"><h2 class="svelte-8uygvi">üé® Layers</h2> <ul class="svelte-8uygvi"><li class="svelte-8uygvi">Toggle layers on/off with the indicator dot</li> <li class="svelte-8uygvi">Click <strong class="svelte-8uygvi">+</strong> to expand and adjust settings</li> <li class="svelte-8uygvi">Adjust <strong class="svelte-8uygvi">intensity</strong>, <strong class="svelte-8uygvi">zoom</strong>, <strong class="svelte-8uygvi">theme</strong>, and <strong class="svelte-8uygvi">sensitivity</strong></li></ul> <h3 class="svelte-8uygvi">Global Controls</h3> <ul class="svelte-8uygvi"><li class="svelte-8uygvi"><strong class="svelte-8uygvi">RANDOM</strong> - Enable automatic parameter changes on beats</li> <li class="svelte-8uygvi"><strong class="svelte-8uygvi">STROBE</strong> - Enable layers flashing on/off with beats</li></ul> <h3 class="svelte-8uygvi">Per-Layer Buttons</h3> <div class="button-legend svelte-8uygvi"><div class="legend-item svelte-8uygvi"><span class="legend-btn r svelte-8uygvi">R</span><span>Include in randomizer (theme/intensity/zoom)</span></div> <div class="legend-item svelte-8uygvi"><span class="legend-btn s svelte-8uygvi">S</span><span>Include in strobe (flash on/off)</span></div></div></section> <section class="svelte-8uygvi"><h2 class="svelte-8uygvi">üéöÔ∏è Audio Tuning</h2> <ul class="svelte-8uygvi"><li class="svelte-8uygvi"><strong class="svelte-8uygvi">Global sensitivity</strong>: overall audio reactivity</li> <li class="svelte-8uygvi"><strong class="svelte-8uygvi">Frequency boosts</strong>: enhance specific ranges</li> <li class="svelte-8uygvi"><strong class="svelte-8uygvi">Beat gate</strong>: threshold for beat detection</li> <li class="svelte-8uygvi"><strong class="svelte-8uygvi">Auto-suggest</strong>: automatic sensitivity adjustment</li></ul></section> <section class="svelte-8uygvi"><h2 class="svelte-8uygvi">üí° Tips</h2> <ul class="svelte-8uygvi"><li class="svelte-8uygvi">Use <strong class="svelte-8uygvi">fullscreen</strong> for best experience</li> <li class="svelte-8uygvi">Try different <strong class="svelte-8uygvi">themes</strong> on each layer</li> <li class="svelte-8uygvi">Adjust <strong class="svelte-8uygvi">sensitivity</strong> if visuals are too subtle or intense</li> <li class="svelte-8uygvi">Enable <strong class="svelte-8uygvi">Power Saver</strong> on laptops to save battery</li></ul></section>',c,m,b='<span>Press <kbd class="svelte-8uygvi">H</kbd> or tap the help button to reopen</span>',v,S;return{c(){e=w("div"),s=w("div"),l=w("button"),l.textContent=i,a=N(),o=w("header"),o.innerHTML=n,r=N(),u=w("div"),u.innerHTML=d,c=N(),m=w("footer"),m.innerHTML=b,this.h()},l(E){e=y(E,"DIV",{class:!0});var R=M(e);s=y(R,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var A=M(s);l=y(A,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),he(l)!=="svelte-h7on2u"&&(l.textContent=i),a=B(A),o=y(A,"HEADER",{class:!0,"data-svelte-h":!0}),he(o)!=="svelte-1jvg3xd"&&(o.innerHTML=n),r=B(A),u=y(A,"DIV",{class:!0,"data-svelte-h":!0}),he(u)!=="svelte-s15uwk"&&(u.innerHTML=d),c=B(A),m=y(A,"FOOTER",{class:!0,"data-svelte-h":!0}),he(m)!=="svelte-ebe8ps"&&(m.innerHTML=b),A.forEach(p),R.forEach(p),this.h()},h(){h(l,"class","close-btn svelte-8uygvi"),h(l,"aria-label","Close"),h(o,"class","info-header svelte-8uygvi"),h(u,"class","info-content svelte-8uygvi"),h(m,"class","info-footer svelte-8uygvi"),h(s,"class","info-panel svelte-8uygvi"),h(s,"role","dialog"),h(s,"aria-modal","true"),h(s,"aria-labelledby","info-title"),h(e,"class","overlay svelte-8uygvi")},m(E,R){U(E,e,R),f(e,s),f(s,l),f(s,a),f(s,o),f(s,r),f(s,u),f(s,c),f(s,m),v||(S=[le(l,"click",t[1]),le(e,"click",t[3])],v=!0)},p:pe,d(E){E&&p(e),v=!1,Ye(S)}}}function zl(t){let e,s,l,i=t[0]&&Wt(t);return{c(){i&&i.c(),e=_e()},l(a){i&&i.l(a),e=_e()},m(a,o){i&&i.m(a,o),U(a,e,o),s||(l=le(window,"keydown",t[2]),s=!0)},p(a,[o]){a[0]?i?i.p(a,o):(i=Wt(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:pe,o:pe,d(a){a&&p(e),i&&i.d(a),s=!1,l()}}}const Yt="soundart-seen-info";function Al(t,e,s){let{visible:l=!1}=e,{onClose:i}=e;function a(){return!localStorage.getItem(Yt)}function o(){localStorage.setItem(Yt,"true")}function n(){o(),i()}function r(d){d.key==="Escape"&&l&&n()}function u(d){d.target===d.currentTarget&&n()}return t.$$set=d=>{"visible"in d&&s(0,l=d.visible),"onClose"in d&&s(4,i=d.onClose)},[l,n,r,u,i,a]}class Vl extends Le{constructor(e){super(),Be(this,e,Al,zl,Ve,{visible:0,onClose:4,shouldShowOnFirstVisit:5})}get shouldShowOnFirstVisit(){return this.$$.ctx[5]}}function Ll(t){let e,s,l,i,a,o,n,r,u,d,c,m,b,v,S,E,R,A={};return s=new Js({props:A}),t[10](s),i=new ll({props:{onEnableMic:t[4],onDisableMic:t[5],onShowInfo:t[6],visible:t[3].panelsVisible}}),o=new gl({props:{visible:t[3].panelsVisible}}),r=new wl({props:{visible:t[3].panelsVisible}}),d=new El({props:{visible:t[3].panelsVisible}}),m=new Dl({props:{visible:t[3].panelsVisible}}),v=new Vl({props:{visible:t[1],onClose:t[7]}}),{c(){e=w("main"),de(s.$$.fragment),l=N(),de(i.$$.fragment),a=N(),de(o.$$.fragment),n=N(),de(r.$$.fragment),u=N(),de(d.$$.fragment),c=N(),de(m.$$.fragment),b=N(),de(v.$$.fragment),this.h()},l(_){e=y(_,"MAIN",{class:!0});var T=M(e);ue(s.$$.fragment,T),l=B(T),ue(i.$$.fragment,T),a=B(T),ue(o.$$.fragment,T),n=B(T),ue(r.$$.fragment,T),u=B(T),ue(d.$$.fragment,T),c=B(T),ue(m.$$.fragment,T),b=B(T),ue(v.$$.fragment,T),T.forEach(p),this.h()},h(){h(e,"class","app svelte-oysh0a"),K(e,"cursor-hidden",t[2])},m(_,T){U(_,e,T),oe(s,e,null),f(e,l),oe(i,e,null),f(e,a),oe(o,e,null),f(e,n),oe(r,e,null),f(e,u),oe(d,e,null),f(e,c),oe(m,e,null),f(e,b),oe(v,e,null),S=!0,E||(R=[le(window,"keydown",t[8]),le(window,"mousemove",t[9])],E=!0)},p(_,[T]){const k={};s.$set(k);const H={};T&8&&(H.visible=_[3].panelsVisible),i.$set(H);const D={};T&8&&(D.visible=_[3].panelsVisible),o.$set(D);const V={};T&8&&(V.visible=_[3].panelsVisible),r.$set(V);const G={};T&8&&(G.visible=_[3].panelsVisible),d.$set(G);const $={};T&8&&($.visible=_[3].panelsVisible),m.$set($);const F={};T&2&&(F.visible=_[1]),v.$set(F),(!S||T&4)&&K(e,"cursor-hidden",_[2])},i(_){S||(W(s.$$.fragment,_),W(i.$$.fragment,_),W(o.$$.fragment,_),W(r.$$.fragment,_),W(d.$$.fragment,_),W(m.$$.fragment,_),W(v.$$.fragment,_),S=!0)},o(_){X(s.$$.fragment,_),X(i.$$.fragment,_),X(o.$$.fragment,_),X(r.$$.fragment,_),X(d.$$.fragment,_),X(m.$$.fragment,_),X(v.$$.fragment,_),S=!1},d(_){_&&p(e),t[10](null),re(s),re(i),re(o),re(r),re(d),re(m),re(v),E=!1,Ye(R)}}}const ft="soundart-seen-info",Bl=3e3;function Nl(t,e,s){let l,i;Me(t,it,k=>s(12,l=k)),Me(t,me,k=>s(3,i=k));let a,o=!1,n=!1,r=null;async function u(){return a?await a.enableMicrophone():!1}function d(){a&&a.disableMicrophone()}async function c(){l?d():await u()}function m(){s(1,o=!0)}function b(){s(1,o=!1),localStorage.setItem(ft,"true")}function v(){o?b():m()}function S(k){if(!(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement))switch(k.key){case"ArrowUp":k.preventDefault(),o||_t(.1);break;case"ArrowDown":k.preventDefault(),o||_t(-.1);break;case"ArrowRight":k.preventDefault(),o||yt(.1);break;case"ArrowLeft":k.preventDefault(),o||yt(-.1);break;case"m":case"M":o||c();break;case"f":case"F":o||E();break;case"h":case"H":v();break;case"r":case"R":o||is();break;case"s":case"S":o||as();break;case"p":case"P":o||ls();break}}async function E(){document.fullscreenElement?(await document.exitFullscreen(),me.update(k=>({...k,fullscreen:!1}))):(await document.documentElement.requestFullscreen(),me.update(k=>({...k,fullscreen:!0})))}function R(){me.update(k=>({...k,fullscreen:!!document.fullscreenElement}))}function A(){n&&s(2,n=!1),r&&clearTimeout(r),r=setTimeout(()=>{s(2,n=!0)},Bl)}function _(){A()}Kt(()=>{document.addEventListener("fullscreenchange",R),A(),localStorage.getItem(ft)||setTimeout(()=>{s(1,o=!0)},800);const k=localStorage.getItem(ft)?500:1500;return setTimeout(()=>{u()},k),()=>{document.removeEventListener("fullscreenchange",R),r&&clearTimeout(r)}});function T(k){Ee[k?"unshift":"push"](()=>{a=k,s(0,a)})}return[a,o,n,i,u,d,m,b,S,_,T]}class Ol extends Le{constructor(e){super(),Be(this,e,Nl,Ll,Ve,{})}}export{Ol as component};
